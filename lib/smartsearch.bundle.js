!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SmartSearch",[],(function(){return e()})):"object"==typeof exports?exports.SmartSearch=e():t.SmartSearch=e().SmartSearch}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=80)}([function(t,e,r){"use strict";var n=SyntaxError,o=Function,i=TypeError,u=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(t){a=null}var s=function(){throw new i},c=a?function(){try{return s}catch(t){try{return a(arguments,"callee").get}catch(t){return s}}}():s,f=r(6)(),p=Object.getPrototypeOf||function(t){return t.__proto__},h={},l="undefined"==typeof Uint8Array?void 0:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):void 0,"%Symbol%":f?Symbol:void 0,"%SyntaxError%":n,"%ThrowTypeError%":c,"%TypedArray%":l,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=r(7),m=r(4),b=d.call(Function.call,Array.prototype.concat),g=d.call(Function.apply,Array.prototype.splice),_=d.call(Function.call,String.prototype.replace),w=d.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,P=function(t){var e=w(t,0,1),r=w(t,-1);if("%"===e&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new n("invalid intrinsic syntax, expected opening `%`");var o=[];return _(t,S,(function(t,e,r,n){o[o.length]=r?_(n,E,"$1"):e||t})),o},A=function(t,e){var r,o=t;if(m(v,o)&&(o="%"+(r=v[o])[0]+"%"),m(y,o)){var a=y[o];if(a===h&&(a=function t(e){var r;if("%AsyncFunction%"===e)r=u("async function () {}");else if("%GeneratorFunction%"===e)r=u("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=u("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=p(o.prototype))}return y[e]=r,r}(o)),void 0===a&&!e)throw new i("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:a}}throw new n("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new i('"allowMissing" argument must be a boolean');var r=P(t),o=r.length>0?r[0]:"",u=A("%"+o+"%",e),s=u.name,c=u.value,f=!1,p=u.alias;p&&(o=p[0],g(r,b([0,1],p)));for(var h=1,l=!0;h<r.length;h+=1){var v=r[h],d=w(v,0,1),_=w(v,-1);if(('"'===d||"'"===d||"`"===d||'"'===_||"'"===_||"`"===_)&&d!==_)throw new n("property names with quotes must have matching quotes");if("constructor"!==v&&l||(f=!0),m(y,s="%"+(o+="."+v)+"%"))c=y[s];else if(null!=c){if(!(v in c)){if(!e)throw new i("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&h+1>=r.length){var S=a(c,v);c=(l=!!S)&&"get"in S&&!("originalValue"in S.get)?S.get:c[v]}else l=m(c,v),c=c[v];l&&!f&&(y[s]=c)}}return c}},function(t,e,r){"use strict";var n=r(34);t.exports=function(t){return"symbol"==typeof t?"Symbol":n(t)}},function(t,e,r){"use strict";var n=r(0),o=r(17),i=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&i(t,".prototype.")>-1?o(r):r}},function(t,e,r){!function(t){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)};function r(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(){}var o=Array.isArray||function(t){return t instanceof Array};function i(t){return t&&t._isObservable}function u(t,e){for(var r=0;r<t.length;r++)if(!e(t[r]))return!1;return!0}function a(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}function s(t,e){return-1!==l(t,e)}function c(t,e){for(var r,n=[],o=0;o<e.length;o++)t(r=e[o])&&n.push(r);return n}function f(t){return function(e,r){return t(r,e)}}function p(t,e,r){for(var n=0;n<t.length;n++)e=r(e,t[n]);return e}function h(t){return t[0]}var l=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var r=0;r<t.length;r++)if(e===t[r])return r;return-1};function y(t){return"function"==typeof t}function v(t,e){for(var r,n=[],o=0;o<e.length;o++)r=e[o],n.push(t(r));return n}function d(t){return t.slice(1,t.length)}function m(t){return o(t)?t:[t]}function b(t){return"function"==typeof t?t:function(e){return t}}var g={indexOf:l,indexWhere:function(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1},head:h,always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:d,filter:c,map:v,each:function(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])},toArray:m,contains:s,id:function(t){return t},last:function(t){return t[t.length-1]},all:u,any:a,without:function(t,e){return c((function(e){return e!==t}),e)},remove:function(t,e){var r=l(e,t);if(r>=0)return e.splice(r,1)},fold:p,flatMap:function(t,e){return p(e,[],(function(e,r){return e.concat(t(r))}))},bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:y,toFunction:b,toString:function t(e){var r={}.hasOwnProperty;try{if(_++,null==e)return"undefined";if(y(e))return"function";if(o(e))return _>5?"[..]":"["+v(t,e).toString()+"]";if(null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString)return e.toString();if("object"==typeof e){if(_>5)return"{..}";var n=[];for(var i in e)if(r.call(e,i)){var u=function(){try{return e[i]}catch(t){return t}}();n.push(t(i)+":"+t(u))}return"{"+n+"}"}return e}finally{_--}}},_=0,w=void 0,S="<no-more>";function E(t,e){if(!e)throw new Error(t)}function P(t){return E("not a function : "+t,g.isFunction(t))}function A(t){return E("no arguments supported",0===t.length)}var x={scheduler:{setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}}},O=void 0,I=[],j={},D=[],T=0,M={},k=!1;function z(t){t<=T||(D[t-1]||(D[t-1]=[[],0]),T=t)}function B(t,e){if(!O&&!k)return e();z(1);for(var r=0;r<T-1&&!C(t,D[r][0]);)r++;D[r][0].push([t,e]),O||N()}function C(t,e){for(var r=0;r<e.length;r++)if(e[r][0].id==t.id)return!0;return!1}function N(){var t=T;if(t){var e=!k;k=!0;try{for(;T>=t;){var r=D[T-1];if(!r)throw new Error("Unexpected stack top: "+r);var n=r[0],o=r[1];if(!(o<n.length)){r[0]=[],r[1]=0;break}var i=n[o][1];r[1]++,z(T+1);var u=!1;try{for(i(),u=!0;T>t&&0==D[T-1][0].length;)T--}finally{u||(D=[],T=0)}}}finally{e&&(k=!1)}}}function L(t,e){if(O){var r=j[t.id];return void 0===r?(r=j[t.id]=[e],I.push(t)):r.push(e)}return e()}function q(t,e){var r=I[t],n=r.id,o=j[n];I.splice(t,1),delete j[n],e&&I.length>0&&function t(e){if(!M[e.id]){for(var r,n=e.internalDeps(),o=0;o<n.length;o++)r=n[o],t(r),j[r.id]&&q(g.indexOf(I,r),!1);M[e.id]=!0}}(r);for(var i=0;i<o.length;i++)(0,o[i])()}var R={toString:function(){return g.toString({rootEvent:O,processingAfters:k,waiterObs:I,waiters:j,aftersStack:D,aftersStackHeight:T,flushed:M})},whenDoneWith:L,hasWaiters:function(){return I.length>0},inTransaction:function(t,e,r,n){if(O)return r.apply(e,n);O=t;try{var o=r.apply(e,n);!function(){for(;I.length>0;)q(0,!0);M={}}()}finally{O=void 0,N()}return o},currentEventId:function(){return O?O.id:void 0},wrappedSubscribe:function(t,e,r){P(r);var n=!1,o=!1,i=function(){o=!0},u=function(){n=!0,i()};return i=e((function(e){return B(t,(function(){n||r(e)===S&&u()})),w})),o&&i(),u},afterTransaction:B,soonButNotYet:function(t,e){O?L(t,e):x.scheduler.setTimeout(e,0)},isInTransaction:function(){return void 0!==O}},U=function(){function t(t,e,r){void 0===r&&(r=[]),this._isDesc=!0,this.context=t,this.method=e,this.args=r}return t.prototype.deps=function(){return this.cachedDeps||(this.cachedDeps=W([this.context].concat(this.args))),this.cachedDeps},t.prototype.toString=function(){var t=g.map(g.toString,this.args);return g.toString(this.context)+"."+g.toString(this.method)+"("+t+")"},t}();function F(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=t||e;return o&&o._isDesc?t||e:new U(t,e,r)}function W(t){return o(t)?g.flatMap(W,t):i(t)?[t]:(null!=t?t._isSource:void 0)?[t.obs]:[]}var V=function(){return w},H=function(){return w};function K(t,e,r){return r.transform(function(t,e){var r=t;return function(t,n){var o=e(r,t),i=o[0],u=o[1];r=i;for(var a=w,s=0;s<u.length;s++)if((a=n(u[s]))===S)return a;return a}}(t,e),new U(r,"withStateMachine",[t,e]))}var G=function(){function t(t){this._isSome=!0,this.isDefined=!0,this.value=t}return t.prototype.getOrElse=function(t){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(e){return e(this.value)?new t(this.value):$},t.prototype.map=function(e){return new t(e(this.value))},t.prototype.forEach=function(t){t(this.value)},t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),$={_isNone:!0,getOrElse:function(t){return t},get:function(){throw new Error("None.get()")},filter:function(){return $},map:function(){return $},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};function Y(){return $}function J(t){return t&&(t._isSome||t._isNone)?t:new G(t)}var Q=0,X=function(){function t(){this.id=++Q,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}return t.prototype.filter=function(t){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t.prototype.toNext=function(){return this},t}(),Z=function(t){function e(e){var r=t.call(this)||this;if(r.hasValue=!0,e instanceof X)throw new ot("Wrapping an event inside other event");return r.value=e,r}return r(e,t),e.prototype.fmap=function(t){return this.apply(t(this.value))},e.prototype.filter=function(t){return t(this.value)},e.prototype.toString=function(){return g.toString(this.value)},e.prototype.log=function(){return this.value},e}(X),tt=function(t){function e(e){var r=t.call(this,e)||this;return r.isNext=!0,r._isNext=!0,r}return r(e,t),e.prototype.apply=function(t){return new e(t)},e}(Z),et=function(t){function e(e){var r=t.call(this,e)||this;return r.isInitial=!0,r._isInitial=!0,r}return r(e,t),e.prototype.apply=function(t){return new e(t)},e.prototype.toNext=function(){return new tt(this.value)},e}(Z),rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r(e,t),e.prototype.fmap=function(t){return this},e}(X),nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnd=!0,e}return r(e,t),e.prototype.toString=function(){return"<end>"},e}(rt),ot=function(t){function e(e){var r=t.call(this)||this;return r.isError=!0,r.error=e,r}return r(e,t),e.prototype.toString=function(){return"<error> "+g.toString(this.error)},e}(rt);function it(t){return new et(t)}function ut(t){return new tt(t)}function at(){return new nt}function st(t){return t&&t._isEvent?t:ut(t)}function ct(t){return t&&t._isEvent}function ft(t){return t&&t._isInitial}function pt(t){return t.isError}function ht(t){return t.hasValue}function lt(t){return t.isEnd}function yt(t,e){return t===e}function vt(t,e,r){return e.transform(dt(t),r||new U(e,"take",[t]))}function dt(t){return function(e,r){return e.hasValue?--t>0?r(e):(0===t&&r(e),r(at()),S):r(e)}}function mt(t,e){e.subscribe((function(e){return"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,t.concat([e.log()])),w}))}function bt(t){return function(e,r){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,t.concat([e.log()])),r(e)}}function gt(t,e,r){var o,i=e,u=!1;return o=new Ue(new U(t,"scan",[e,r]),(function(e){var a=!1,s=n,c=w,f=function(){return a||(a=u=!0,(c=e(new et(i)))===S&&(s(),s=n)),c};return s=t.subscribeInternal((function(t){if(ht(t)){if(u&&t.isInitial)return w;t.isInitial||f(),a=u=!0;var n=r(i,t.value);return i=n,e(t.apply(n))}return t.isEnd&&(c=f()),c!==S?e(t):c})),R.whenDoneWith(o,f),s}))}var _t=function(){function t(t){void 0===t&&(t=[]),this.unsubscribed=!1,this.unsubscribe=g.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var e,r=0;r<t.length;r++)e=t[r],this.add(e)}return t.prototype.add=function(t){var e=this;if(!this.unsubscribed){var r=!1,o=n;this.starting.push(t),o=t(this.unsubscribe,(function(){e.unsubscribed||(r=!0,e.remove(o),g.remove(t,e.starting))})),this.unsubscribed||r?o():this.subscriptions.push(o),g.remove(t,this.starting)}},t.prototype.remove=function(t){if(!this.unsubscribed)return void 0!==g.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,e=0;e<t.length;e++)t[e]();this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}();function wt(t,e){return function(r){var o=!1,i=!1,u=n,a=w,s=function(){if(!o)return t.forEach((function(t){if(o=!0,(a=r(new et(t)))===S)return u(),u=n,n}))};return u=e((function(e){return e instanceof Z?e.isInitial&&!i?(t=new G(e.value),w):(e.isInitial||s(),o=!0,t=new G(e.value),r(e)):(e.isEnd&&(a=s()),a!==S?r(e):a)})),i=!0,s(),u}}function St(t,e){return P(e),new Ue(t,wt(Y(),e))}function Et(t){var e=new Ve(new U("Bacon","once",[t]),(function(r){return R.soonButNotYet(e,(function(){r(st(t)),r(at())})),n}));return e}function Pt(t,e,r){void 0===r&&(r={});var n=e,o=[n],i=[],u=e._isProperty,a=!1,s=(u?St:Ke)(r.desc||new U(e,"flatMap_",[t]),(function(e){var o=new _t,s=[];function c(r){if(u&&r.isInitial){if(a)return w;a=!0}var n=xt(t(r));return i.push(n),o.add((function(t,r){return n.subscribeInternal((function(o){if(o.isEnd)return g.remove(n,i),function(){var t=s.shift();t&&c(t)}(),f(r),S;o=o.toNext();var u=e(o);return u===S&&t(),u}))}))}function f(t){return t(),o.empty()?e(at()):w}return o.add((function(t,i){return n.subscribeInternal((function(t){return t.isEnd?f(i):t.isError&&!r.mapError?e(t):r.firstOnly&&o.count()>1?w:o.unsubscribed?S:(r.limit&&o.count()>r.limit?s.push(t):c(t),w)}))})),o.unsubscribe}));return s.internalDeps=function(){return i.length?o.concat(i):o},s}function At(t){return"function"==typeof t?function(e){return ht(e)?t(e.value):e}:function(e){return t}}function xt(t){return i(t)?t:Et(t)}function Ot(t,e){return Pt(e,t,{mapError:!0,desc:new U(t,"flatMapEvent",[e])})}var It=function(){function t(t,e){this._isSource=!0,this.flatten=!0,this.ended=!1,this.obs=t,this.sync=e}return t.prototype.subscribe=function(t){return this.obs.subscribeInternal(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=function(){this.ended=!0},t.prototype.mayHave=function(t){return!0},t}(),jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.consume=function(){return this.value},e.prototype.push=function(t){this.value=t},e.prototype.hasAtLeast=function(t){return!!this.value},e}(It),Dt=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.flatten=!1,n.queue=[],n}return r(e,t),e.prototype.consume=function(){return this.queue.shift()},e.prototype.push=function(t){this.queue.push(t)},e.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},e.prototype.hasAtLeast=function(t){return this.queue.length>=t},e}(It),Tt=function(t){function e(e){var r=t.call(this,e,!0)||this;return r.queue=[],r}return r(e,t),e.prototype.consume=function(){var t=this.queue;return this.queue=[],{value:t}},e.prototype.push=function(t){return this.queue.push(t.value)},e.prototype.hasAtLeast=function(t){return!0},e}(It);function Mt(t){return null!=t&&(t._isSource?t.sync:t._isEventStream)}function kt(t){return null!=t&&t._isSource?t:null!=t&&t._isProperty?new jt(t,!1):new Dt(t,!0)}function zt(){return new Ve(F("Bacon","never"),(function(t){return t(at()),n}))}function Bt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nt(He,t)}function Ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nt(St,t)}function Nt(t,e){if(0===e.length)return zt();var r=function(t){for(var e=[],r=[],n=0;n<t.length;n++){for(var o,i=t[n],u=i[0],a={f:i[1],ixs:[]},s=!1,c=0;c<u.length;c++){o=u[c];var f=l(e,o);s||(s=Mt(o)),f<0&&(e.push(o),f=e.length-1);for(var p=0;p<a.ixs.length;p++){var h=a.ixs[p];h.index===f&&h.count++}a.ixs.push({index:f,count:1})}if(u.length>0&&!s)throw new Error("At least one EventStream required, none found in "+u);u.length>0&&r.push(a)}return[v(kt,e),r]}(Ut(e)),n=r[0],o=r[1];if(!n.length)return zt();var i,f,p=a(n,(function(t){return t.flatten}))&&(i=v((function(t){return t.obs}),n),void 0===f&&(f=[]),a(i,(function t(e){if(s(f,e))return!0;var r=e.internalDeps();return r.length?(f.push(e),a(r,t)):(f.push(e),!1)}))),h=t(new U("Bacon","when",Array.prototype.slice.call(e)),(function(t){var e=[],r=!1;function i(t){for(var e=0;e<t.ixs.length;e++){var r=t.ixs[e];if(!n[r.index].hasAtLeast(r.count))return!1}return!0}function a(t){for(var e=0;e<t.ixs.length;e++){var r=t.ixs[e];if(!n[r.index].mayHave(r.count))return!0}return!1}function s(t){return!t.source.flatten}return new _t(v((function(f){return function(l){function y(){return R.whenDoneWith(h,v)}function v(){var f=function r(){var u;if(void 0!==(u=e.pop()))for(var a,f=w,p=0;p<o.length;p++)if(i(a=o[p])){for(var h=[],l=0;l<a.ixs.length;l++){var y=n[a.ixs[l].index].consume();if(!y)throw new Error("Event was undefined");h.push(y.value)}var v=a.f.apply(null,h);return f=t(u.e.apply(v)),e.length&&(e=c(s,e)),f===S?f:r()}return w}();r&&(u(n,Ft)||u(o,a))&&(f=S,t(at())),f===S&&l()}return f.subscribe((function(n){var o=w;if(n.isEnd)r=!0,f.markEnded(),y();else if(n.isError)o=t(n);else{var i=n;f.push(i),f.sync&&(e.push({source:f,e:i}),p||R.hasWaiters()?y():v())}return o===S&&l(),o}))}}),n)).unsubscribe}));return h}function Lt(t){for(var e=0,r=t.length,n=[];e<r;){var o=m(t[e++]),i=b(t[e++]);n.push([o,i])}return E("when: expecting arguments in the form (Observable+,function)+",r%2==0),n}function qt(t){return t instanceof Array&&!i(t[t.length-1])}function Rt(t){return t[0]instanceof Array}function Ut(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(!qt(n))return Lt(t);if(Rt(n))e.push([n[0],b(n[1])]);else{var o=n.slice(0,n.length-1),i=b(n[n.length-1]);e.push([o,i])}}return e}function Ft(t){return!t.sync||t.ended}function Wt(t,e,r){return Bt([new jt(e.toProperty(),!1),new jt(t,!0),f(r)]).withDesc(new U(t,"withLatestFrom",[e,r]))}function Vt(t,e,r){return Ct([new jt(e.toProperty(),!1),new jt(t,!0),f(r)]).withDesc(new U(t,"withLatestFrom",[e,r]))}function Ht(t,e,r){if(t instanceof Ue)return Vt(t,e,r);if(t instanceof Ve)return Wt(t,e,r);throw new Error("Unknown observable: "+t)}function Kt(t,e){return e instanceof Ue?Ht(t,e,(function(t,e){return e})):t.transform(Gt(e),new U(t,"map",[e]))}function Gt(t){var e=g.toFunction(t);return function(t,r){return r(t.fmap(e))}}function $t(t){return new Ue(new U("Bacon","constant",[t]),(function(e){return e(it(t)),e(at()),n}))}function Yt(t){return t=Array.prototype.slice.call(t),g.flatMap(Jt,t)}function Jt(t){return i(t)?[t]:o(t)?Yt(t):[$t(t)]}function Qt(t){return g.isFunction(t[0])?[Yt(Array.prototype.slice.call(t,1)),t[0]]:[Yt(Array.prototype.slice.call(t,0,t.length-1)),g.last(t)]}function Xt(t,e){return Nt((function(t,r){return new Ve(t,r,void 0,e)}),[g.map((function(t){return new Tt(t)}),t),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}]).withDesc(new U("Bacon","groupSimultaneous",t))}function Zt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if((t=Yt(t)).length){for(var r=[],n=0;n<t.length;n++){var o=i(t[n])?t[n]:$t(t[n]);r.push(ee(o))}return Ct([r,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}]).withDesc(new U("Bacon","combineAsArray",t))}return $t([])}function te(t,e,r){return Ct([[ee(t),ee(e)],r]).withDesc(new U(t,"combine",[e,r]))}function ee(t){return new jt(t,!0)}function re(t,e){return Pt(At(e),t,{desc:new U(t,"flatMapConcat",[e]),limit:1})}function ne(t,e){void 0===e&&(e=g.id);var r=new U("Bacon","fromBinder",[t,e]);return new Ve(r,(function(r){var n=!1,i=!1,u=function(){if(!n)return null!=a?(a(),n=!0):i=!0},a=t((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=e.apply(void 0,t),a=o(i)&&ct(g.last(i))?i:[i],s=w,c=0;c<a.length;c++){var f=st(a[c]);if((s=r(f))===S||f.isEnd)return u(),s}return s}));return i&&u(),u}))}function oe(t,e){var r=new U("Bacon","fromPoll",[t,e]);return ne((function(e){var r=x.scheduler.setInterval(e,t);return function(){return x.scheduler.clearInterval(r)}}),e).withDesc(r)}function ie(t,e){return oe(t,(function(){return ut(e)})).withDesc(new U("Bacon","interval",[t,e]))}function ue(t,e,r){return t instanceof Ve?function(t,e,r){return ae(t.toProperty(),e,r).withDesc(new U(t,"sampledBy",[e]))}(t,e,r):ae(t,e,r)}function ae(t,e,r){return Ht(e,t,f(function(t){return"function"==typeof t?t:g.id}(r))).withDesc(new U(t,"sampledBy",[e]))}function se(t,e){return ae(t,ie(e,{}),(function(t,e){return t})).withDesc(new U(t,"sample",[e]))}function ce(t,e,r){return new Ue(new U(t,"transform",[e]),(function(r){return t.subscribeInternal((function(t){return e(t,r)}))})).withDesc(r)}function fe(t,e,r){return new Ve(new U(t,"transform",[e]),(function(r){return t.subscribeInternal((function(t){return e(t,r)}))}),void 0,We).withDesc(r)}function pe(t,e){var r,n=function(t){return e(t,r)};return function(e,o){return r=o,t(e,n)}}function he(t,e,r,n){return e instanceof Ue?Ht(t,e,(function(t,e){return[t,e]})).transform(pe(r((function(t){return t[1]})),Gt((function(t){return t[0]}))),n):t.transform(r(function(t){if("boolean"==typeof t)return g.always(t);if("function"!=typeof t)throw new Error("Not a function: "+t);return t}(e)),n)}function le(t){return function(e,r){return e.filter(t)?r(e):w}}function ye(t){return t.map((function(t){return!t})).withDesc(new U(t,"not",[]))}function ve(t){return Fe(t)?t:$t(t)}function de(t,e){return Pt(At(e),t,{firstOnly:!0,desc:new U(t,"flatMapFirst",[e])})}function me(t,e,r){return new Ve(new U(t,"concat",[e]),(function(r){var o=n,i=t.dispatcher.subscribe((function(t){return t.isEnd?(o=e.toEventStream().dispatcher.subscribe(r),w):r(t)}));return function(){return i(),o()}}),void 0,r)}function be(t,e,r){return t.scan(e,r).last().withDesc(new U(t,"fold",[e,r]))}var ge={};function _e(t,e){return Pt(At(e),t,{desc:new U(t,"flatMap",[e])})}function we(t,e){return Pt((function(t){if(t instanceof ot){var r=t.error;return e(r)}return t}),t,{mapError:!0,desc:new U(t,"flatMapError",[e])})}var Se=[],Ee=!1;function Pe(t){if(Se.length&&!Ee)try{Ee=!0,Se.forEach((function(e){e(t)}))}finally{Ee=!1}}function Ae(t,e){var r=g.toFunction(e),n=Fe(t)?t.toEventStream(We):t,o=_e(n,(function(t){return xt(r(t)).takeUntil(n)}));return Fe(t)&&(o=o.toProperty()),o.withDesc(new U(t,"flatMapLatest",[r]))}var xe=function(){function t(t,e,r){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=e,this._handleEvent=r,this.subscribe=g.bind(this.subscribe,this),this.handleEvent=g.bind(this.handleEvent,this),this.subscriptions=[],this.observable=t,this.queue=[]}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(t){return this.subscriptions=g.without(t,this.subscriptions),this.subscriptions},t.prototype.push=function(t){return t.isEnd&&(this.ended=!0),R.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){try{for(var e=this.subscriptions,r=e.length,n=0;n<r;n++){var o=e[n];(o.sink(t)===S||t.isEnd)&&this.removeSub(o)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),w;if(t!==this.prevError){for(t.isError&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;;){var e=this.queue.shift();if(!e)break;this.push(e)}return this.hasSubscribers()?w:(this.unsubscribeFromSource(),S)}},t.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},t.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(t){var e=this;if(this.ended)return t(at()),n;P(t);var r={sink:t};return this.subscriptions.push(r),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),P(this.unsubSrc)),function(){if(e.removeSub(r),!e.hasSubscribers())return e.unsubscribeFromSource()}},t.prototype.inspect=function(){return this.observable.toString()},t}(),Oe=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.current=Y(),o.propertyEnded=!1,o.subscribe=g.bind(o.subscribe,o),o}return r(e,t),e.prototype.push=function(e){return e.isEnd&&(this.propertyEnded=!0),e instanceof Z?(this.current=new G(e),this.currentValueRootId=R.currentEventId()):e.hasValue&&console.error("Unknown event, two Bacons loaded?",e.constructor),t.prototype.push.call(this,e)},e.prototype.maybeSubSource=function(e,r){return r===S?n:this.propertyEnded?(e(at()),n):t.prototype.subscribe.call(this,e)},e.prototype.subscribe=function(t){var e=this,r=w;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var n=R.currentEventId(),o=this.currentValueRootId;return!this.propertyEnded&&o&&n&&n!==o?(R.whenDoneWith(this.observable,(function(){if(e.currentValueRootId===o)return t(it(e.current.get().value))})),this.maybeSubSource(t,r)):(R.inTransaction(void 0,this,(function(){return r=t(it(e.current.get().value))}),[]),this.maybeSubSource(t,r))}return this.maybeSubSource(t,r)},e.prototype.inspect=function(){return this.observable+" current= "+this.current},e}(xe);function Ie(t,e,r){return Pt(At(r),t,{desc:new U(t,"flatMapWithConcurrencyLimit",[e,r]),limit:e})}function je(t,e,r){var o=function(t){if(void 0!==t){if("number"==typeof t){var e=t;return function(t){return x.scheduler.setTimeout(t,e)}}return t}}(e);function i(t){return t.values.length===r?t.flush():void 0!==o?t.schedule(o):void 0}var u=new U(t,"bufferWithTimeOrCount",[e,r]);return function(t,e,r){void 0===e&&(e=n),void 0===r&&(r=n);var o=w,i=new De(r,e);return t.transform((function(t,r){return i.push=r,ht(t)?(i.values.push(t.value),e(i)):pt(t)?o=r(t):lt(t)&&(i.end=t,i.scheduled||i.flush()),o})).withDesc(new U(t,"buffer",[]))}(t,i,i).withDesc(u)}var De=function(){function t(t,e){this.push=function(t){return w},this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=t,this.onInput=e}return t.prototype.flush=function(){if(this.scheduled&&(x.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var t=this.values;this.values=[];var e=this.push(ut(t));if(null!=this.end)return this.push(this.end);if(e!==S)return this.onFlush(this)}else if(null!=this.end)return this.push(this.end)},t.prototype.schedule=function(t){var e=this;if(!this.scheduled)return this.scheduled=t((function(){return e.flush()}))},t}();function Te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Yt(t);return r.length?new Ve(new U("Bacon","mergeAll",r),(function(t){var e=0,n=v((function(n){return function(o){return n.subscribeInternal((function(n){if(n.isEnd)return++e===r.length?t(at()):w;n=n.toNext();var i=t(n);return i===S&&o(),i}))}}),r);return new _t(n).unsubscribe})):zt()}function Me(t,e){return ne((function(r){var n=x.scheduler.setTimeout((function(){return r([st(e),at()])}),t);return function(){return x.scheduler.clearTimeout(n)}})).withDesc(new U("Bacon","later",[t,e]))}function ke(t){return function(e,r){return e.filter(t)?r(e):(r(at()),S)}}function ze(t){var e=!1;return function(r,n){return!e&&ht(r)&&t(r.value)?w:(r.hasValue&&(e=!0),n(r))}}function Be(t,e,r){void 0===r&&(r=g.id);var n={};return t.transform(pe(le((function(t){return!n[e(t)]})),Gt((function(o){var i=e(o),u=t.changes().filter((function(t){return e(t)===i})),a=Et(o).concat(u),s=r(a,o).toEventStream().transform((function(t,e){var r=e(t);return t.isEnd&&delete n[i],r}));return n[i]=s,s}))))}var Ce={};function Ne(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Qt(arguments);return e=n[0],t=n[1],Bt([e=g.map((function(t){return t.toEventStream()}),e),t]).withDesc(new U("Bacon","zipWith",[t].concat(e)))}function Le(t){function e(t,e,r){return(function(t){return t[t.length-1]}(t))[e]=r,r}function r(t){return o(t)?[]:{}}function n(t){if(i(t))return!0;if(t&&(t.constructor==Object||t.constructor==Array))for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return!0}function u(t,o){i(o)?(c.push(o),s.push(function(t,r){return function(n,o){e(n,t,o[r])}}(t,c.length-1))):n(o)?(s.push(function(t,n){return function(o){var i=r(n);e(o,t,i),o.push(i)}}(t,o)),a(o),s.push((function(t){t.pop()}))):s.push(function(t,r){return function(n){e(n,t,r)}}(t,o))}function a(t){g.each(t,u)}var s=[],c=[];return(n(t)?(a(t),Zt(c).map((function(e){for(var n=r(t),o=[n],i=0;i<s.length;i++)(0,s[i])(o,e);return n}))):$t(t)).withDesc(new U("Bacon","combineTemplate",[t]))}var qe=0,Re=function(){function t(t){this.id=++qe,this._isObservable=!0,this.desc=t,this.initialDesc=t}return t.prototype.awaiting=function(t){return function(t,e){return Xt([t,e],We).map((function(t){return 0===t[1].length})).toProperty(!1).skipDuplicates().withDesc(new U(t,"awaiting",[e]))}(this,t)},t.prototype.bufferingThrottle=function(t){return function(t,e){var r=new U(t,"bufferingThrottle",[e]);return t.transformChanges(r,(function(t){return t.flatMapConcat((function(t){return Et(t).concat(Me(e,t).errors())}))}))}(this,t)},t.prototype.combine=function(t,e){return te(this,t,e)},t.prototype.debounce=function(t){return function(t,e){return t.transformChanges(new U(t,"debounce",[e]),(function(t){return t.flatMapLatest((function(t){return Me(e,t)}))}))}(this,t)},t.prototype.debounceImmediate=function(t){return function(t,e){return t.transformChanges(new U(t,"debounceImmediate",[e]),(function(t){return t.flatMapFirst((function(t){return Et(t).concat(Me(e,t).errors())}))}))}(this,t)},t.prototype.decode=function(t){return function(t,e){return t.combine(Le(e),(function(t,e){return e[t]})).withDesc(new U(t,"decode",[e]))}(this,t)},t.prototype.delay=function(t){return function(t,e){return t.transformChanges(new U(t,"delay",[e]),(function(t){return t.flatMap((function(t){return Me(e,t)}))}))}(this,t)},t.prototype.deps=function(){return this.desc.deps()},t.prototype.diff=function(t,e){return function(t,e,r){return ce(gt(t,[e,Ce],(function(t,e){return[e,r(t[0],e)]})),pe(le((function(t){return t[1]!==Ce})),Gt((function(t){return t[1]}))),new U(t,"diff",[e,r]))}(this,t,e)},t.prototype.doAction=function(t){return this.transform(function(t){return function(e,r){return ht(e)&&t(e.value),r(e)}}(t),new U(this,"doAction",[t]))},t.prototype.doEnd=function(t){return this.transform(function(t){return function(e,r){return lt(e)&&t(),r(e)}}(t),new U(this,"doEnd",[t]))},t.prototype.doError=function(t){return this.transform(function(t){return function(e,r){return pt(e)&&t(e.error),r(e)}}(t),new U(this,"doError",[t]))},t.prototype.doLog=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.transform(bt(t),new U(this,"doLog",t))},t.prototype.endAsValue=function(){return this.transform((function(t,e){return lt(t)?(e(ut({})),e(at()),S):w}))},t.prototype.endOnError=function(t){return void 0===t&&(t=function(t){return!0}),function(t,e){return void 0===e&&(e=function(t){return!0}),t.transform((function(t,r){return pt(t)&&e(t.error)?(r(t),r(at())):r(t)}),new U(t,"endOnError",[]))}(this,t)},t.prototype.errors=function(){return this.filter((function(t){return!1})).withDesc(new U(this,"errors"))},t.prototype.filter=function(t){return function(t,e){return he(t,e,le,new U(t,"filter",[e]))}(this,t)},t.prototype.first=function(){return vt(1,this,new U(this,"first"))},t.prototype.firstToPromise=function(t){return function(t,e){if("function"!=typeof e){if("function"!=typeof Promise)throw new Error("There isn't default Promise, use shim or parameter");e=function(t){return new Promise(t)}}return new e((function(e,r){return t.subscribe((function(t){return ht(t)&&e(t.value),pt(t)&&r(t.error),S}))}))}(this,t)},t.prototype.fold=function(t,e){return be(this,t,e)},t.prototype.forEach=function(t){return void 0===t&&(t=V),this.onValue(t)},t.prototype.holdWhen=function(t){return function(t,e){var r=!1,n=[],o=!1;return new Ve(new U(t,"holdWhen",[e]),(function(i){var u=new _t,a=!1,s=function(t){return t&&t(),u.empty()&&a?i(at()):w};return u.add((function(t,u){return e.subscribeInternal((function(t){if(ht(t)){r=t.value;var e=w;if(!r){var a=n;n=[];for(var c=0;c<a.length;c++)e=i(ut(a[c]));o&&(i(at()),u(),e=S)}return e}return t.isEnd?s(u):i(t)}))})),u.add((function(e,u){return t.subscribeInternal((function(t){return r&&ht(t)?(n.push(t.value),w):t.isEnd&&n.length?(o=!0,s(u)):i(t)}))})),a=!0,s(),u.unsubscribe}))}(this,t)},t.prototype.inspect=function(){return this.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t.prototype.last=function(){return(t=this).transform((function(t,r){return lt(t)?(e&&r(e),r(at()),S):ht(t)?(e=t,w):r(t)})).withDesc(new U(t,"last",[]));var t,e},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mt(t,this),this},t.prototype.mapEnd=function(t){return this.transform(function(t){var e=g.toFunction(t);return function(t,r){return lt(t)?(r(ut(e(t))),r(at()),S):r(t)}}(t),new U(this,"mapEnd",[t]))},t.prototype.mapError=function(t){return this.transform(function(t){var e=g.toFunction(t);return function(t,r){return pt(t)?r(ut(e(t.error))):r(t)}}(t),new U(this,"mapError",[t]))},t.prototype.name=function(t){return this._name=t,this},t.prototype.onEnd=function(t){return void 0===t&&(t=H),this.subscribe((function(e){return e.isEnd?t():w}))},t.prototype.onError=function(t){return void 0===t&&(t=V),this.subscribe((function(e){return pt(e)?t(e.error):w}))},t.prototype.onValue=function(t){return void 0===t&&(t=V),this.subscribe((function(e){return ht(e)?t(e.value):w}))},t.prototype.onValues=function(t){return this.onValue((function(e){return t.apply(void 0,e)}))},t.prototype.reduce=function(t,e){return be(this,t,e)},t.prototype.sampledBy=function(t){return ue(this,t,arguments[1])},t.prototype.scan=function(t,e){return gt(this,t,e)},t.prototype.skip=function(t){return function(t,e){return t.transform((function(t,r){return t.hasValue&&e>0?(e--,w):r(t)}),new U(t,"skip",[e]))}(this,t)},t.prototype.skipDuplicates=function(t){return function(t,e){void 0===e&&(e=yt);var r=new U(t,"skipDuplicates",[]);return K(Y(),(function(t,r){return ht(r)?r.isInitial||null!=(n=t)&&n._isNone||!e(t.get(),r.value)?[new G(r.value),[r]]:[t,[]]:[t,[r]];var n}),t).withDesc(r)}(this,t)},t.prototype.skipErrors=function(){return(t=this).transform((function(t,e){return pt(t)?w:e(t)}),new U(t,"skipErrors",[]));var t},t.prototype.skipUntil=function(t){return function(t,e){var r=e.transform(pe(dt(1),Gt(!0))).toProperty().startWith(!1);return t.filter(r).withDesc(new U(t,"skipUntil",[e]))}(this,t)},t.prototype.skipWhile=function(t){return function(t,e){return he(t,e,ze,new U(t,"skipWhile",[e]))}(this,t)},t.prototype.slidingWindow=function(t,e){return void 0===e&&(e=0),function(t,e,r){return void 0===r&&(r=0),t.scan([],(function(t,r){return t.concat([r]).slice(-e)})).filter((function(t){return t.length>=r})).withDesc(new U(t,"slidingWindow",[e,r]))}(this,t,e)},t.prototype.subscribe=function(t){var e=this;return void 0===t&&(t=V),R.wrappedSubscribe(this,(function(t){return e.subscribeInternal(t)}),t)},t.prototype.take=function(t){return vt(t,this)},t.prototype.takeUntil=function(t){return function(t,e){var r=Xt([t.mapEnd(ge),e.skipErrors()],We);return t instanceof Ue&&(r=r.toProperty()),r.transform((function(t,e){if(ht(t)){var r=t.value,n=r[0];if(r[1].length)return e(at());for(var o=w,i=0;i<n.length;i++){var u=n[i];if(u===ge)return e(at());o=e(ut(u))}return o}return e(t)}),new U(t,"takeUntil",[e]))}(this,t)},t.prototype.takeWhile=function(t){return function(t,e){return he(t,e,ke,new U(t,"takeWhile",[e]))}(this,t)},t.prototype.throttle=function(t){return function(t,e){return t.transformChanges(new U(t,"throttle",[e]),(function(t){return t.bufferWithTime(e).map((function(t){return t[t.length-1]}))}))}(this,t)},t.prototype.toPromise=function(t){return function(t,e){return t.last().firstToPromise(e)}(this,t)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.withDesc=function(t){return t&&(this.desc=t),this},t.prototype.withDescription=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.desc=F.apply(void 0,[t,e].concat(r)),this},t.prototype.zip=function(t,e){return function(t,e,r){return Ne(r||Array,t,e).withDesc(new U(t,"zip",[e]))}(this,t,e)},t}(),Ue=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o._isProperty=!0,P(r),o.dispatcher=new Oe(o,r,n),Pe(o),o}return r(e,t),e.prototype.and=function(t){return r=t,(e=this).combine(ve(r),(function(t,e){return!(!t||!e)})).withDesc(new U(e,"and",[r]));var e,r},e.prototype.changes=function(){var t=this;return new Ve(new U(this,"changes",[]),(function(e){return t.dispatcher.subscribe((function(t){return t.isInitial?w:e(t)}))}))},e.prototype.concat=function(t){return this.transformChanges(F(this,"concat",t),(function(e){return e.concat(t)}))},e.prototype.transformChanges=function(t,e){return function(t,e,r){var n,o,i=e(new Ve(F(t,"changes",[]),(function(e){return t.dispatcher.subscribe((function(t){return!n&&ft(t)&&(n=t,R.whenDoneWith(u,(function(){if(!o)throw new Error("Init sequence fail");o(n)}))),t.isInitial?w:e(t)}))}),void 0,We)),u=St(r,(function(t){return o=t,i.dispatcher.subscribe((function(e){t(e)}))}));return u}(this,e,t)},e.prototype.flatMap=function(t){return _e(this,t)},e.prototype.flatMapConcat=function(t){return re(this,t)},e.prototype.flatMapError=function(t){return we(this,t)},e.prototype.flatMapEvent=function(t){return Ot(this,t)},e.prototype.flatMapFirst=function(t){return de(this,t)},e.prototype.flatMapLatest=function(t){return Ae(this,t)},e.prototype.flatMapWithConcurrencyLimit=function(t,e){return Ie(this,t,e)},e.prototype.groupBy=function(t,e){return Be(this,t,e)},e.prototype.map=function(t){return Kt(this,t)},e.prototype.not=function(){return ye(this)},e.prototype.or=function(t){return r=t,(e=this).combine(ve(r),(function(t,e){return t||e})).withDesc(new U(e,"or",[r]));var e,r},e.prototype.sample=function(t){return se(this,t)},e.prototype.startWith=function(t){return function(t,e){return t.scan(e,(function(t,e){return e})).withDesc(new U(t,"startWith",[e]))}(this,t)},e.prototype.subscribeInternal=function(t){return void 0===t&&(t=V),this.dispatcher.subscribe(t)},e.prototype.toEventStream=function(t){var e=this;return new Ve(new U(this,"toEventStream",[]),(function(t){return e.subscribeInternal((function(e){return t(e.toNext())}))}),void 0,t)},e.prototype.toProperty=function(){return A(arguments),this},e.prototype.transform=function(t,e){return ce(this,t,e)},e.prototype.withLatestFrom=function(t,e){return Vt(this,t,e)},e.prototype.withStateMachine=function(t,e){return K(t,e,this)},e}(Re);function Fe(t){return!!t._isProperty}var We={forceAsync:!1},Ve=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i._isEventStream=!0,o!==We&&(r=function(t,e){var r=!1;return function(n){var o,i=R.isInTransaction();function u(){var t=o||[];o=void 0;for(var e=0;e<t.length;e++){var r=t[e];n(r)}}r=!0;try{return e((function(e){return r||o?(o?o.push(e):(o=[e],i?R.soonButNotYet(t,u):x.scheduler.setTimeout(u,0)),w):n(e)}))}finally{r=!1}}}(i,r)),i.dispatcher=new xe(i,r,n),Pe(i),i}return r(e,t),e.prototype.bufferWithTime=function(t){return function(t,e){return je(t,e,Number.MAX_VALUE).withDesc(new U(t,"bufferWithTime",[e]))}(this,t)},e.prototype.bufferWithCount=function(t){return function(t,e){return je(t,void 0,e).withDesc(new U(t,"bufferWithCount",[e]))}(this,t)},e.prototype.bufferWithTimeOrCount=function(t,e){return je(this,t,e)},e.prototype.changes=function(){return this},e.prototype.concat=function(t,e){return me(this,t,e)},e.prototype.transformChanges=function(t,e){return e(this).withDesc(t)},e.prototype.flatMap=function(t){return _e(this,t)},e.prototype.flatMapConcat=function(t){return re(this,t)},e.prototype.flatMapError=function(t){return we(this,t)},e.prototype.flatMapFirst=function(t){return de(this,t)},e.prototype.flatMapLatest=function(t){return Ae(this,t)},e.prototype.flatMapWithConcurrencyLimit=function(t,e){return Ie(this,t,e)},e.prototype.flatMapEvent=function(t){return Ot(this,t)},e.prototype.flatScan=function(t,e){return function(t,e,r){var n=e;return t.flatMapConcat((function(t){return xt(r(n,t)).doAction((function(t){return n=t}))})).toProperty().startWith(e).withDesc(new U(t,"flatScan",[e,r]))}(this,t,e)},e.prototype.groupBy=function(t,e){return Be(this,t,e)},e.prototype.map=function(t){return Kt(this,t)},e.prototype.merge=function(t){return function(t){if(!(null!=t?t._isEventStream:void 0))throw new Error("not an EventStream : "+t)}(t),Te(this,t).withDesc(new U(this,"merge",[t]))},e.prototype.not=function(){return ye(this)},e.prototype.startWith=function(t){return function(t,e){return Et(e).concat(t).withDesc(new U(t,"startWith",[e]))}(this,t)},e.prototype.subscribeInternal=function(t){return void 0===t&&(t=V),this.dispatcher.subscribe(t)},e.prototype.toEventStream=function(){return this},e.prototype.toProperty=function(t){var e=arguments.length?J(t):Y(),r=this.dispatcher,n=new U(this,"toProperty",Array.prototype.slice.apply(arguments)),o=r.subscribe;return new Ue(n,wt(e,o))},e.prototype.transform=function(t,e){return fe(this,t,e)},e.prototype.withLatestFrom=function(t,e){return Wt(this,t,e)},e.prototype.withStateMachine=function(t,e){return K(t,e,this)},e}(Re);function He(t,e){return new Ve(t,e)}function Ke(t,e){return new Ve(t,e,void 0,We)}function Ge(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t}var $e=function(){function t(t){this.observable=t}return t.prototype.subscribe=function(t,e,r){var n="function"==typeof t?{next:t,error:e,complete:r}:t,o={closed:!1,unsubscribe:function(){o.closed=!0,i()}},i=this.observable.subscribe((function(t){ht(t)&&n.next?n.next(t.value):pt(t)?(n.error&&n.error(t.error),o.unsubscribe()):t.isEnd&&(o.closed=!0,n.complete&&n.complete())}));return o},t}();function Ye(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return t.apply(void 0,[r].concat(e))}}}$e.prototype[Ge("observable")]=function(){return this},Re.prototype.toESObservable=function(){return new $e(this)},Re.prototype[Ge("observable")]=Re.prototype.toESObservable;var Je=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];function Qe(t,e,r){var n=function(t){for(var e,r=0;r<Je.length;r++){var n=[t[(e=Je[r])[0]],t[e[1]]];if(n[0]&&n[1])return n}for(var o=0;o<Je.length;o++){var i=t[(e=Je[o])[0]];if(i)return[i,function(){}]}throw new Error("No suitable event methods in "+t)}(t),o=n[0],i=n[1],u=new U("Bacon","fromEvent",[t,e]);return ne((function(r){return n=e,g.isFunction(n)?(e(o.bind(t),r),function(){return e(i.bind(t),r)}):(o.call(t,e,r),function(){return i.call(t,e,r)});var n}),r).withDesc(u)}function Xe(t){var e=0;return ne((function(r){var n=!1,o=w,i=function(){};function u(t){return t.isEnd?(n?a():n=!0,w):o=r(t)}function a(){var a;for(n=!0;n&&o!==S;)a=t(e++),n=!1,a?i=a.subscribeInternal(u):r(at());n=!0}return a(),function(){return i()}})).withDesc(new U("Bacon","repeat",[t]))}function Ze(t){return Me(t,"").filter(!1).withDesc(new U("Bacon","silence",[t]))}function tr(t){return[st(t),at()]}function er(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.apply(void 0,e.concat(r))}}var rr,nr=(rr=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return g.isFunction(t)?e.length?er(t,e):t:g.always(t)},function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if("object"==typeof t&&e.length){var n=t,o=e[0];t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n[o].apply(n,t)},e=e.slice(1)}return rr.apply(void 0,[t].concat(e))});function or(t,e){return nr.apply(void 0,[t].concat(e))}var ir=function(t){function e(){var e=t.call(this,new U("Bacon","Bus",[]),(function(t){return e.subscribeAll(t)}))||this;return e.pushing=!1,e.pushQueue=void 0,e.ended=!1,e.subscriptions=[],e.unsubAll=g.bind(e.unsubAll,e),e.subscriptions=[],e.ended=!1,e}return r(e,t),e.prototype.plug=function(t){var e=this;if(function(t){if(!(null!=t?t._isObservable:void 0))throw new Error("not an Observable : "+t)}(t),!this.ended){var r={input:t,unsub:void 0};return this.subscriptions.push(r),void 0!==this.sink&&this.subscribeInput(r),function(){return e.unsubscribeInput(t)}}},e.prototype.end=function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(at())},e.prototype.push=function(t){if(!this.ended&&"function"==typeof this.sink){var e=!this.pushing;if(!e)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(t);this.pushing=!0;try{return this.sink(ut(t))}finally{if(e&&this.pushQueue){for(var r=0;r<this.pushQueue.length;){var n=this.pushQueue[r];this.sink(ut(n)),r++}this.pushQueue=void 0}this.pushing=!1}}},e.prototype.error=function(t){if("function"==typeof this.sink)return this.sink(new ot(t))},e.prototype.unsubAll=function(){for(var t,e=this.subscriptions,r=0;r<e.length;r++)"function"==typeof(t=e[r]).unsub&&t.unsub()},e.prototype.subscribeAll=function(t){if(this.ended)t(at());else{this.sink=t;for(var e,r=this.subscriptions.slice(),n=0;n<r.length;n++)e=r[n],this.subscribeInput(e)}return this.unsubAll},e.prototype.guardedSink=function(t){var e=this;return function(r){return r.isEnd?(e.unsubscribeInput(t),S):e.sink?e.sink(r):w}},e.prototype.subscribeInput=function(t){return t.unsub=t.input.subscribeInternal(this.guardedSink(t.input)),t.unsub},e.prototype.unsubscribeInput=function(t){for(var e,r=this.subscriptions,n=0;n<r.length;n++)if((e=r[n]).input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(n,1)},e}(Ve),ur={asEventStream:function(t,e,r){var n=this;return g.isFunction(e)&&(r=e,e=void 0),ne((function(r){return n.on(t,e,r),function(){return n.off(t,e,r)}}),r).withDesc(new U(this.selector||this,"asEventStream",[t]))},init:function(t){t.fn.asEventStream=ur.asEventStream}};t.$=ur,t.Bus=ir,t.CompositeUnsubscribe=_t,t.Desc=U,t.End=nt,t.Error=ot,t.Event=X,t.EventStream=Ve,t.Initial=et,t.Next=tt,t.Observable=Re,t.Property=Ue,t.Value=Z,t._=g,t.combine=te,t.combineAsArray=Zt,t.combineTemplate=Le,t.combineWith=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Qt(arguments),o=(e=n[0],t=n[1],new U("Bacon","combineWith",[t].concat(e)));return Zt(e).map((function(e){return t.apply(void 0,e)})).withDesc(o)},t.concatAll=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Yt(t);return(r.length?p(d(r),h(r).toEventStream(),(function(t,e){return t.concat(e)})):zt()).withDesc(new U("Bacon","concatAll",r))},t.constant=$t,t.fromArray=function(t){if(function(t){if(!o(t))throw new Error("not an array : "+t)}(t),t.length){var e=0,r=new Ve(new U("Bacon","fromArray",[t]),(function(n){var o=!1,i=w,u=!1,a=!1;return R.soonButNotYet(r,(function s(){if(a=!0,!u){if(e===t.length)return n(at()),!1;for(u=!0;a;)if(a=!1,i!==S&&!o){var c=t[e++];(i=n(st(c)))!==S&&(e===t.length?n(at()):R.afterTransaction(r,s))}return u=!1}})),function(){return o=!0}}));return r}return zt().withDesc(new U("Bacon","fromArray",t))},t.fromBinder=ne,t.fromCallback=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return ne((function(r){return or(t,e)(r),n}),(function(t){return[t,at()]})).withDesc(new U("Bacon","fromCallback",[t].concat(e)))},t.fromESObservable=function(t){var e;e=t[Ge("observable")]?t[Ge("observable")]():t;var r=new U("Bacon","fromESObservable",[e]);return new Ve(r,(function(t){var r=e.subscribe({error:function(e){t(new ot(e)),t(new nt)},next:function(e){t(new tt(e))},complete:function(){t(new nt)}});return r.unsubscribe?function(){r.unsubscribe()}:r}))},t.fromEvent=Qe,t.fromEventTarget=Qe,t.fromNodeCallback=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return ne((function(r){return or(t,e)(r),n}),(function(t,e){return t?[new ot(t),at()]:[e,at()]})).withDesc(new U("Bacon","fromNodeCallback",[t].concat(e)))},t.fromPoll=oe,t.fromPromise=function(t,e,r){return void 0===r&&(r=tr),ne((function(r){var n=t.then(r,(function(t){return r(new ot(t))}));return n&&"function"==typeof n.done&&n.done(),e?function(){if("function"==typeof t.abort)return t.abort()}:function(){}}),r).withDesc(new U("Bacon","fromPromise",[t]))},t.getScheduler=function(){return x.scheduler},t.groupSimultaneous=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(Yt(t))},t.hasValue=ht,t.interval=ie,t.isEnd=lt,t.isError=pt,t.isEvent=ct,t.isInitial=ft,t.isNext=function(t){return t.isNext},t.later=Me,t.mergeAll=Te,t.more=w,t.never=zt,t.noMore=S,t.nullSink=V,t.nullVoidSink=H,t.onValues=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zt(t.slice(0,t.length-1)).onValues(t[arguments.length-1])},t.once=Et,t.repeat=Xe,t.repeatedly=function(t,e){var r=0;return oe(t,(function(){return e[r++%e.length]})).withDesc(new U("Bacon","repeatedly",[t,e]))},t.retry=function(t){if(!g.isFunction(t.source))throw new Error("'source' option has to be a function");var e=t.source,r=t.retries||0,n=0,o=t.delay||function(){return 0},i=t.isRetryable||function(){return!0},u=!1,a=null;return Xe((function(t){function s(){return e(t).endOnError().transform((function(t,e){return pt(t)?i((a=t).error)&&(0===r||n<r)?w:(u=!0,e(t)):(ht(t)&&(a=null,u=!0),e(t))}))}if(!u){if(a){var c={error:a.error,retriesDone:n},f=Ze(o(c));return n++,f.concat(Et(null).flatMap(s))}return s()}})).withDesc(new U("Bacon","retry",[t]))},t.sequentially=function(t,e){var r=0;return oe(t,(function(){var t=e[r++];return r<e.length?t:r===e.length?[st(t),at()]:at()})).withDesc(new U("Bacon","sequentially",[t,e]))},t.setScheduler=function(t){x.scheduler=t},t.silence=Ze,t.spy=function(t){return Se.push(t)},t.try=function(t){return function(e){try{return Et(t(e))}catch(t){return Et(new ot(t))}}},t.update=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=Ut(e),o=0;o<n.length;o++){var i=n[o];i[1]=Ye(i[1])}return Bt.apply(void 0,n).scan(t,(function(t,e){return e(t)})).withDesc(new U("Bacon","update",[t].concat(e)))},t.version="3.0.12",t.when=Bt,t.zipAsArray=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=g.map((function(t){return t.toEventStream()}),Yt(t));return Bt([r,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}]).withDesc(new U("Bacon","zipAsArray",t))},t.zipWith=Ne,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){"use strict";var n=r(7);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,r){"use strict";t.exports=function(t){return"string"==typeof t||"symbol"==typeof t}},function(t,e,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(16);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},function(t,e,r){"use strict";var n=r(31);t.exports=Function.prototype.bind||n},function(t,e,r){"use strict";var n=r(0)("%Array%"),o=!n.isArray&&r(2)("Object.prototype.toString");t.exports=n.isArray||function(t){return"[object Array]"===o(t)}},function(t,e,r){"use strict";var n=r(0),o=n("%TypeError%"),i=n("%SyntaxError%"),u=r(4),a={"Property Descriptor":function(t,e){if("Object"!==t(e))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(u(e,n)&&!r[n])return!1;var i=u(e,"[[Value]]"),a=u(e,"[[Get]]")||u(e,"[[Set]]");if(i&&a)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}};t.exports=function(t,e,r,n){var u=a[e];if("function"!=typeof u)throw new i("unknown record type: "+e);if(!u(t,n))throw new o(r+" must be a "+e)}},function(t,e,r){"use strict";t.exports=r(11)},function(t,e,r){"use strict";var n,o,i=Function.prototype.toString,u="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof u&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw o}}),o={},u((function(){throw 42}),null,n)}catch(t){t!==o&&(u=null)}else u=null;var a=/^\s*class\b/,s=function(t){try{var e=i.call(t);return a.test(e)}catch(t){return!1}},c=Object.prototype.toString,f="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,p="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};t.exports=u?function(t){if(t===p)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{u(t,null,n)}catch(t){if(t!==o)return!1}return!s(t)}:function(t){if(t===p)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(f)return function(t){try{return!s(t)&&(i.call(t),!0)}catch(t){return!1}}(t);if(s(t))return!1;var e=c.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,r){"use strict";var n=r(29),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,u=Array.prototype.concat,a=Object.defineProperty,s=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,r,n){var o;(!(e in t)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(s?a(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},f=function(t,e){var r=arguments.length>2?arguments[2]:{},i=n(e);o&&(i=u.call(i,Object.getOwnPropertySymbols(e)));for(var a=0;a<i.length;a+=1)c(t,i[a],e[i[a]],r[i[a]])};f.supportsDescriptors=!!s,t.exports=f},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},function(t,e,r){"use strict";var n=r(15),o=r(32),i=r(40),u=r(10),a=r(43),s=r(48),c=r(51),f=r(68),p=r(69);t.exports=function(t){var e,r,h,l=this;if(null==t)throw new TypeError("`Array.from` requires an array-like object, not `null` or `undefined`");if(void 0!==arguments[1]){if(!u(e=arguments[1]))throw new TypeError("When provided, the second argument to `Array.from` must be a function");arguments.length>2&&(r=arguments[2])}try{h=p(t)}catch(e){h=t}for(var y,v,d=s(h),m=c(d.length),b=a(l)?s(new l(m)):new Array(m),g=0;g<m;){var _=f(g);y=i(d,_),v=e?void 0===r?e(y,g):n(e,r,[y,g]):y,o(b,_,v),g+=1}return b.length=m,b}},function(t,e,r){"use strict";var n=r(0),o=r(2),i=n("%TypeError%"),u=r(8),a=n("%Reflect.apply%",!0)||o("%Function.prototype.apply%");t.exports=function(t,e){var r=arguments.length>2?arguments[2]:[];if(!u(r))throw new i("Assertion failed: optional `argumentsList`, if provided, must be a List");return a(t,e,r)}},function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,r){"use strict";var n=r(7),o=r(0),i=o("%Function.prototype.apply%"),u=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||n.call(u,i),s=o("%Object.getOwnPropertyDescriptor%",!0),c=o("%Object.defineProperty%",!0),f=o("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(n,u,arguments);if(s&&c){var r=s(e,"length");r.configurable&&c(e,"length",{value:1+f(0,t.length-(arguments.length-1))})}return e};var p=function(){return a(n,i,arguments)};c?c(t.exports,"apply",{value:p}):t.exports.apply=p},function(t,e,r){"use strict";var n=r(0)("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch(t){n=null}var o=r(2)("Object.prototype.propertyIsEnumerable");t.exports=function(t,e,r,i,u,a){if(!n){if(!t(a))return!1;if(!a["[[Configurable]]"]||!a["[[Writable]]"])return!1;if(u in i&&o(i,u)!==!!a["[[Enumerable]]"])return!1;var s=a["[[Value]]"];return i[u]=s,e(i[u],s)}return n(i,u,r(a)),!0}},function(t,e,r){"use strict";var n=r(9),o=r(1);t.exports=function(t){if(void 0===t)return t;n(o,"Property Descriptor","Desc",t);var e={};return"[[Value]]"in t&&(e.value=t["[[Value]]"]),"[[Writable]]"in t&&(e.writable=t["[[Writable]]"]),"[[Get]]"in t&&(e.get=t["[[Get]]"]),"[[Set]]"in t&&(e.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(e.enumerable=t["[[Enumerable]]"]),"[[Configurable]]"in t&&(e.configurable=t["[[Configurable]]"]),e}},function(t,e,r){"use strict";t.exports=function(t){return!!t}},function(t,e,r){"use strict";var n=r(4),o=r(0)("%TypeError%"),i=r(1),u=r(20),a=r(10);t.exports=function(t){if("Object"!==i(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(n(t,"enumerable")&&(e["[[Enumerable]]"]=u(t.enumerable)),n(t,"configurable")&&(e["[[Configurable]]"]=u(t.configurable)),n(t,"value")&&(e["[[Value]]"]=t.value),n(t,"writable")&&(e["[[Writable]]"]=u(t.writable)),n(t,"get")){var r=t.get;if(void 0!==r&&!a(r))throw new o("getter must be a function");e["[[Get]]"]=r}if(n(t,"set")){var s=t.set;if(void 0!==s&&!a(s))throw new o("setter must be a function");e["[[Set]]"]=s}if((n(e,"[[Get]]")||n(e,"[[Set]]"))&&(n(e,"[[Value]]")||n(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}},function(t,e,r){"use strict";var n=r(4),o=r(9),i=r(1);t.exports=function(t){return void 0!==t&&(o(i,"Property Descriptor","Desc",t),!(!n(t,"[[Value]]")&&!n(t,"[[Writable]]")))}},function(t,e,r){"use strict";t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=r(25);t.exports=function(t,e){return t===e?0!==t||1/t==1/e:n(t)&&n(e)}},function(t,e,r){"use strict";t.exports=Number.isNaN||function(t){return t!=t}},function(t,e,r){"use strict";t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,r){"use strict";var n=r(15),o=r(8),i=r(10),u=r(14),a=function(t){try{return t()}catch(t){return!1}};t.exports=function(){if(i(Array.from)){if(!a((function(){return Array.from([0],void 0)}))){var t=Array.from;return function(e){return n(t,this,arguments.length>1&&void 0!==arguments[1]?arguments:[e])}}if(a((function(){return 0===Array.from({length:-1})}))&&a((function(){var t=Array.from([0].entries());return 1===t.length&&o(t[0])&&0===t[0][0]&&0===t[0][1]}))&&a((function(){return Array.from({length:-1/0})})))return Array.from}return u}},function(t,e,r){"use strict";var n=r(12),o=r(14),i=r(27),u=r(78),a=i(),s=function(t){return a.apply(this||Array,arguments)};n(s,{getPolyfill:i,implementation:o,shim:u}),t.exports=s},function(t,e,r){"use strict";var n=Array.prototype.slice,o=r(13),i=Object.keys,u=i?function(t){return i(t)}:r(30),a=Object.keys;u.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(n.call(t)):a(t)}):Object.keys=u;return Object.keys||u},t.exports=u},function(t,e,r){"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,u=r(13),a=Object.prototype.propertyIsEnumerable,s=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),n=u(t),a=e&&"[object String]"===i.call(t),h=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var y=c&&r;if(a&&t.length>0&&!o.call(t,0))for(var v=0;v<t.length;++v)h.push(String(v));if(n&&t.length>0)for(var d=0;d<t.length;++d)h.push(String(d));else for(var m in t)y&&"prototype"===m||!o.call(t,m)||h.push(String(m));if(s)for(var b=function(t){if("undefined"==typeof window||!l)return p(t);try{return p(t)}catch(t){return!1}}(t),g=0;g<f.length;++g)b&&"constructor"===f[g]||!o.call(t,f[g])||h.push(f[g]);return h}}t.exports=n},function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError(n+e);for(var r,u=o.call(arguments,1),a=function(){if(this instanceof r){var n=e.apply(this,u.concat(o.call(arguments)));return Object(n)===n?n:this}return e.apply(t,u.concat(o.call(arguments)))},s=Math.max(0,e.length-u.length),c=[],f=0;f<s;f++)c.push("$"+f);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var p=function(){};p.prototype=e.prototype,r.prototype=new p,p.prototype=null}return r}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(33),i=r(5),u=r(1);t.exports=function(t,e,r){if("Object"!==u(t))throw new n("Assertion failed: Type(O) is not Object");if(!i(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var a=o(t,e,r);if(!a)throw new n("unable to create data property");return a}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(18),i=r(19),u=r(35),a=r(22),s=r(39),c=r(5),f=r(24),p=r(1);t.exports=function(t,e,r){if("Object"!==p(t))throw new n("Assertion failed: Type(O) is not Object");if(!c(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var h=u(t,e),l=!h||s(t);return!(h&&(!h["[[Writable]]"]||!h["[[Configurable]]"])||!l)&&o(a,f,i,t,e,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":r,"[[Writable]]":!0})}},function(t,e,r){"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}},function(t,e,r){"use strict";var n=r(0),o=r(36),i=n("%TypeError%"),u=r(2)("Object.prototype.propertyIsEnumerable"),a=r(4),s=r(8),c=r(5),f=r(37),p=r(21),h=r(1);t.exports=function(t,e){if("Object"!==h(t))throw new i("Assertion failed: O must be an Object");if(!c(e))throw new i("Assertion failed: P must be a Property Key");if(a(t,e)){if(!o){var r=s(t)&&"length"===e,n=f(t)&&"lastIndex"===e;return{"[[Configurable]]":!(r||n),"[[Enumerable]]":u(t,e),"[[Value]]":t[e],"[[Writable]]":!0}}return p(o(t,e))}}},function(t,e,r){"use strict";var n=r(0)("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(t){n=null}t.exports=n},function(t,e,r){"use strict";var n=r(0)("%Symbol.match%",!0),o=r(38),i=r(20);t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(n){var e=t[n];if(void 0!==e)return i(e)}return o(t)}},function(t,e,r){"use strict";var n,o,i,u,a=r(2),s=r(6)()&&"symbol"==typeof Symbol.toStringTag;if(s){n=a("Object.prototype.hasOwnProperty"),o=a("RegExp.prototype.exec"),i={};var c=function(){throw i};u={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(u[Symbol.toPrimitive]=c)}var f=a("Object.prototype.toString"),p=Object.getOwnPropertyDescriptor;t.exports=s?function(t){if(!t||"object"!=typeof t)return!1;var e=p(t,"lastIndex");if(!(e&&n(e,"value")))return!1;try{o(t,u)}catch(t){return t===i}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===f(t)}},function(t,e,r){"use strict";var n=r(0)("%Object%"),o=r(23),i=n.preventExtensions,u=n.isExtensible;t.exports=i?function(t){return!o(t)&&u(t)}:function(t){return!o(t)}},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(41),i=r(5),u=r(1);t.exports=function(t,e){if("Object"!==u(t))throw new n("Assertion failed: Type(O) is not Object");if(!i(e))throw new n("Assertion failed: IsPropertyKey(P) is not true, got "+o(e));return t[e]}},function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,u=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&s&&"function"==typeof s.get?s.get:null,f=a&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,l=Boolean.prototype.valueOf,y=Object.prototype.toString,v=Function.prototype.toString,d=String.prototype.match,m="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,g="function"==typeof Symbol?Symbol.prototype.toString:null,_=Object.prototype.propertyIsEnumerable,w=r(42).custom,S=w&&x(w)?w:null;function E(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function P(t){return String(t).replace(/"/g,"&quot;")}function A(t){return"[object Array]"===j(t)}function x(t){return"[object Symbol]"===j(t)}t.exports=function t(e,r,n,o){var a=r||{};if(I(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(I(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!I(a,"customInspect")||a.customInspect;if("boolean"!=typeof s)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(I(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return function t(e,r){if(e.length>r.maxStringLength){var n=e.length-r.maxStringLength,o="... "+n+" more character"+(n>1?"s":"");return t(e.slice(0,r.maxStringLength),r)+o}return E(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,T),"single",r)}(e,a);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var y=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=y&&y>0&&"object"==typeof e)return A(e)?"[Array]":"[Object]";var b=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Array(t.indent+1).join(" ")}return{base:r,prev:Array(e+1).join(r)}}(a,n);if(void 0===o)o=[];else if(D(o,e)>=0)return"[Circular]";function _(e,r,i){if(r&&(o=o.slice()).push(r),i){var u={depth:a.depth};return I(a,"quoteStyle")&&(u.quoteStyle=a.quoteStyle),t(e,u,n+1,o)}return t(e,a,n+1,o)}if("function"==typeof e){var w=function(t){if(t.name)return t.name;var e=d.call(v.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),O=C(e,_);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(O.length>0?" { "+O.join(", ")+" }":"")}if(x(e)){var N=g.call(e);return"object"==typeof e?M(N):N}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var L="<"+String(e.nodeName).toLowerCase(),q=e.attributes||[],R=0;R<q.length;R++)L+=" "+q[R].name+"="+E(P(q[R].value),"double",a);return L+=">",e.childNodes&&e.childNodes.length&&(L+="..."),L+="</"+String(e.nodeName).toLowerCase()+">"}if(A(e)){if(0===e.length)return"[]";var U=C(e,_);return b&&!function(t){for(var e=0;e<t.length;e++)if(D(t[e],"\n")>=0)return!1;return!0}(U)?"["+B(U,b)+"]":"[ "+U.join(", ")+" ]"}if(function(t){return"[object Error]"===j(t)}(e)){var F=C(e,_);return 0===F.length?"["+String(e)+"]":"{ ["+String(e)+"] "+F.join(", ")+" }"}if("object"==typeof e&&s){if(S&&"function"==typeof e[S])return e[S]();if("function"==typeof e.inspect)return e.inspect()}if(function(t){if(!i||!t||"object"!=typeof t)return!1;try{i.call(t);try{c.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var W=[];return u.call(e,(function(t,r){W.push(_(r,e,!0)+" => "+_(t,e))})),z("Map",i.call(e),W,b)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{i.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var V=[];return f.call(e,(function(t){V.push(_(t,e))})),z("Set",c.call(e),V,b)}if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{p.call(t,p);try{h.call(t,h)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return k("WeakMap");if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t,h);try{p.call(t,p)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return k("WeakSet");if(function(t){return"[object Number]"===j(t)}(e))return M(_(Number(e)));if(function(t){return"[object BigInt]"===j(t)}(e))return M(_(m.call(e)));if(function(t){return"[object Boolean]"===j(t)}(e))return M(l.call(e));if(function(t){return"[object String]"===j(t)}(e))return M(_(String(e)));if(!function(t){return"[object Date]"===j(t)}(e)&&!function(t){return"[object RegExp]"===j(t)}(e)){var H=C(e,_);return 0===H.length?"{}":b?"{"+B(H,b)+"}":"{ "+H.join(", ")+" }"}return String(e)};var O=Object.prototype.hasOwnProperty||function(t){return t in this};function I(t,e){return O.call(t,e)}function j(t){return y.call(t)}function D(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function T(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function M(t){return"Object("+t+")"}function k(t){return t+" { ? }"}function z(t,e,r,n){return t+" ("+e+") {"+(n?B(r,n):r.join(", "))+"}"}function B(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+t.join(","+r)+"\n"+e.prev}function C(t,e){var r=A(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=I(t,o)?e(t[o],t):""}for(var i in t)I(t,i)&&(r&&String(Number(i))===i&&i<t.length||(/[^\w$]/.test(i)?n.push(e(i,t)+": "+e(t[i],t)):n.push(i+": "+e(t[i],t))));if("function"==typeof b)for(var u=b(t),a=0;a<u.length;a++)_.call(t,u[a])&&n.push("["+e(u[a])+"]: "+e(t[u[a]],t));return n}},function(t,e){},function(t,e,r){"use strict";var n=r(44)("%Reflect.construct%",!0),o=r(45);try{o({},"",{"[[Get]]":function(){}})}catch(t){o=null}if(o&&n){var i={},u={};o(u,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),t.exports=function(t){try{n(t,u)}catch(t){return t===i}}}else t.exports=function(t){return"function"==typeof t&&!!t.prototype}},function(t,e,r){"use strict";t.exports=r(0)},function(t,e,r){"use strict";var n=r(0)("%TypeError%"),o=r(46),i=r(18),u=r(19),a=r(47),s=r(22),c=r(5),f=r(24),p=r(21),h=r(1);t.exports=function(t,e,r){if("Object"!==h(t))throw new n("Assertion failed: Type(O) is not Object");if(!c(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");var l=o({Type:h,IsDataDescriptor:s,IsAccessorDescriptor:a},r)?r:p(r);if(!o({Type:h,IsDataDescriptor:s,IsAccessorDescriptor:a},l))throw new n("Assertion failed: Desc is not a valid Property Descriptor");return i(s,f,u,t,e,l)}},function(t,e,r){"use strict";var n=r(0),o=r(4),i=n("%TypeError%");t.exports=function(t,e){if("Object"!==t.Type(e))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(o(e,n)&&!r[n])return!1;if(t.IsDataDescriptor(e)&&t.IsAccessorDescriptor(e))throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}},function(t,e,r){"use strict";var n=r(4),o=r(9),i=r(1);t.exports=function(t){return void 0!==t&&(o(i,"Property Descriptor","Desc",t),!(!n(t,"[[Get]]")&&!n(t,"[[Set]]")))}},function(t,e,r){"use strict";var n=r(0)("%Object%"),o=r(49);t.exports=function(t){return o(t),n(t)}},function(t,e,r){"use strict";t.exports=r(50)},function(t,e,r){"use strict";var n=r(0)("%TypeError%");t.exports=function(t,e){if(null==t)throw new n(e||"Cannot call method on "+t);return t}},function(t,e,r){"use strict";var n=r(52),o=r(53);t.exports=function(t){var e=o(t);return e<=0?0:e>n?n:e}},function(t,e,r){"use strict";var n=r(0),o=n("%Math%"),i=n("%Number%");t.exports=i.MAX_SAFE_INTEGER||o.pow(2,53)-1},function(t,e,r){"use strict";var n=r(54),o=r(62);t.exports=function(t){var e=o(t);return n(e)}},function(t,e,r){"use strict";var n=r(55),o=r(56),i=r(57),u=r(25),a=r(60),s=r(61);t.exports=function(t){var e=i(t);return u(e)?0:0!==e&&a(e)?s(e)*o(n(e)):e}},function(t,e,r){"use strict";var n=r(0)("%Math.abs%");t.exports=function(t){return n(t)}},function(t,e,r){"use strict";var n=Math.floor;t.exports=function(t){return n(t)}},function(t,e,r){"use strict";var n=r(58);t.exports=function(t){var e=n(t,Number);if("string"!=typeof e)return+e;var r=e.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test(r)?NaN:+r}},function(t,e,r){"use strict";t.exports=r(59)},function(t,e,r){"use strict";var n=Object.prototype.toString,o=r(26),i=r(11),u=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===n.call(t)?String:Number)===String||e===Number){var r,u,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(u=0;u<a.length;++u)if(i(t[a[u]])&&(r=t[a[u]](),o(r)))return r;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return o(t)?t:arguments.length>1?u(t,arguments[1]):u(t)}},function(t,e,r){"use strict";var n=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!n(t)&&t!==1/0&&t!==-1/0}},function(t,e,r){"use strict";t.exports=function(t){return t>=0?1:-1}},function(t,e,r){"use strict";var n=r(0),o=n("%TypeError%"),i=n("%Number%"),u=n("%RegExp%"),a=n("%parseInt%"),s=r(2),c=r(63),f=r(23),p=s("String.prototype.slice"),h=c(/^0b[01]+$/i),l=c(/^0o[0-7]+$/i),y=c(/^[-+]0x[0-9a-f]+$/i),v=c(new u("["+["","",""].join("")+"]","g")),d=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),m=new RegExp("(^["+d+"]+)|(["+d+"]+$)","g"),b=s("String.prototype.replace"),g=r(64);t.exports=function t(e){var r=f(e)?e:g(e,i);if("symbol"==typeof r)throw new o("Cannot convert a Symbol value to a number");if("string"==typeof r){if(h(r))return t(a(p(r,2),2));if(l(r))return t(a(p(r,2),8));if(v(r)||y(r))return NaN;var n=function(t){return b(t,m,"")}(r);if(n!==r)return t(n)}return i(r)}},function(t,e,r){"use strict";var n=r(0)("RegExp.prototype.test"),o=r(17);t.exports=function(t){return o(n,t)}},function(t,e,r){"use strict";var n=r(65);t.exports=function(t){return arguments.length>1?n(t,arguments[1]):n(t)}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=r(26),i=r(11),u=r(66),a=r(67),s=function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var r,n,u,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(u=0;u<a.length;++u)if(r=t[a[u]],i(r)&&(n=r.call(t),o(n)))return n;throw new TypeError("No default value")},c=function(t,e){var r=t[e];if(null!=r){if(!i(r))throw new TypeError(r+" returned for property "+e+" of object "+t+" is not a function");return r}};t.exports=function(t){if(o(t))return t;var e,r="default";if(arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number")),n&&(Symbol.toPrimitive?e=c(t,Symbol.toPrimitive):a(t)&&(e=Symbol.prototype.valueOf)),void 0!==e){var i=e.call(t,r);if(o(i))return i;throw new TypeError("unable to convert exotic object to primitive")}return"default"===r&&(u(t)||a(t))&&(r="string"),s(t,"default"===r?"number":r)}},function(t,e,r){"use strict";var n=Date.prototype.getDay,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,r){"use strict";var n=Object.prototype.toString;if(r(6)()){var o=Symbol.prototype.toString,i=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&i.test(o.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}},function(t,e,r){"use strict";var n=r(0),o=n("%String%"),i=n("%TypeError%");t.exports=function(t){if("symbol"==typeof t)throw new i("Cannot convert a Symbol value to a string");return o(t)}},function(t,e,r){"use strict";var n=r(70),o=TypeError,i=r(77);t.exports=function(t){var e=n(t);if(!e)throw new o("non-iterable value provided");return arguments.length>1?i(e,arguments[1]):i(e)}},function(t,e,r){"use strict";(function(e){var n=r(72);if(r(6)()||r(16)()){var o=Symbol.iterator;t.exports=function(t){return null!=t&&void 0!==t[o]?t[o]():n(t)?Array.prototype[o].call(t):void 0}}else{var i=r(73),u=r(74),a=r(0),s=a("%Map%",!0),c=a("%Set%",!0),f=r(2),p=f("Array.prototype.push"),h=f("String.prototype.charCodeAt"),l=f("String.prototype.slice"),y=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},v=function(t,e){if(i(t)||n(t))return y(t);if(u(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=h(t,e);if(r<55296||r>56319)return e+1;var n=h(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=l(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(s||c){var d=r(75),m=r(76),b=f("Map.prototype.forEach",!0),g=f("Set.prototype.forEach",!0);if(void 0===e||!e.versions||!e.versions.node)var _=f("Map.prototype.iterator",!0),w=f("Set.prototype.iterator",!0),S=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch(t){return e=!0,{done:!0,value:void 0}}}}};var E=f("Map.prototype.@@iterator",!0)||f("Map.prototype._es6-shim iterator_",!0),P=f("Set.prototype.@@iterator",!0)||f("Set.prototype._es6-shim iterator_",!0);t.exports=function(t){return function(t){if(d(t)){if(_)return S(_(t));if(E)return E(t);if(b){var e=[];return b(t,(function(t,r){p(e,[r,t])})),y(e)}}if(m(t)){if(w)return S(w(t));if(P)return P(t);if(g){var r=[];return g(t,(function(t){p(r,t)})),y(r)}}}(t)||v(t)}}else t.exports=function(t){if(null!=t)return v(t,!0)}}}).call(this,r(71))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var s,c=[],f=!1,p=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):p=-1,c.length&&l())}function l(){if(!f){var t=a(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++p<e;)s&&s[p].run();p=-1,e=c.length}s=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new y(t,e)),1!==c.length||f||a(l)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=r(2)("Object.prototype.toString"),i=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o(t)},u=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o(t)&&"[object Function]"===o(t.callee)},a=function(){return i(arguments)}();i.isLegacyArguments=u,t.exports=a?i:u},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=String.prototype.valueOf,o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"string"==typeof t||"object"==typeof t&&(i?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object String]"===o.call(t))}},function(t,e,r){"use strict";var n,o="function"==typeof Map&&Map.prototype?Map:null,i="function"==typeof Set&&Set.prototype?Set:null;o||(n=function(t){return!1});var u=o?Map.prototype.has:null,a=i?Set.prototype.has:null;n||u||(n=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(u.call(t),a)try{a.call(t)}catch(t){return!0}return t instanceof o}catch(t){}return!1}},function(t,e,r){"use strict";var n,o="function"==typeof Map&&Map.prototype?Map:null,i="function"==typeof Set&&Set.prototype?Set:null;i||(n=function(t){return!1});var u=o?Map.prototype.has:null,a=i?Set.prototype.has:null;n||a||(n=function(t){return!1}),t.exports=n||function(t){if(!t||"object"!=typeof t)return!1;try{if(a.call(t),u)try{u.call(t)}catch(t){return!0}return t instanceof i}catch(t){}return!1}},function(t,e,r){"use strict";var n=TypeError;t.exports=function(t){if(!t||"function"!=typeof t.next)throw new n("iterator must be an object with a `next` method");if(arguments.length>1){var e=arguments[1];if("function"!=typeof e)throw new n("`callback`, if provided, must be a function")}for(var r,o=e||[];(r=t.next())&&!r.done;)e?e(r.value):o.push(r.value);if(!e)return o}},function(t,e,r){"use strict";var n=r(12),o=r(27);t.exports=function(){var t=o();return n(Array,{from:t},{from:function(){return Array.from!==t}}),t}},function(t,e){!function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var e=function(t,e){var r,n;return(e=e||{}).bubbles=!!e.bubbles,e.cancelable=!!e.cancelable,(r=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n=r.preventDefault,r.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},r};e.prototype=window.Event.prototype,window.CustomEvent=e}}()},function(t,e,r){"use strict";r.r(e);r(28),r(79);var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,u="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),a="FormData"in n,s="ArrayBuffer"in n;if(s)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function p(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function y(t){this.map={},t instanceof y?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function m(t){var e=new FileReader,r=d(e);return e.readAsArrayBuffer(t),r}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:u&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&u&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||f(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=v(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(m)}),this.text=function(){var t,e,r,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=d(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}y.prototype.append=function(t,e){t=p(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},y.prototype.delete=function(t){delete this.map[p(t)]},y.prototype.get=function(t){return t=p(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(p(t))},y.prototype.set=function(t,e){this.map[p(t)]=h(e)},y.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},y.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),l(t)},y.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},y.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),l(t)},i&&(y.prototype[Symbol.iterator]=y.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new y(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),_.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function S(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function E(t,e){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var P=[301,302,303,307,308];E.redirect=function(t,e){if(-1===P.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})};var A=n.DOMException;try{new A}catch(t){(A=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function x(t,e){return new Promise((function(r,o){var i=new w(t,e);if(i.signal&&i.signal.aborted)return o(new A("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new y,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){r(new E(o,n))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new A("Aborted","AbortError"))}),0)},a.open(i.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(u?a.responseType="blob":s&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof y?i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){a.setRequestHeader(t,h(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",c)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}x.polyfill=!0,n.fetch||(n.fetch=x,n.Headers=y,n.Request=w,n.Response=E);var O=function(){function t(t,e){this.result=t,this.highlights=e[t.id]}return t.prototype.render=function(t){return t(this.result,this.highlights)},t}(),I=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,a)}s((n=n.apply(t,e||[])).next())}))},j=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},D=function(){function t(t,e,r){var n=this;this.data=e,this.config=r,this._filterClient=t,this._name=r.baseName,this._type=e.name.split("_").pop(),this._counts=this.data.counts.map((function(t){return t.filterQuery=n.getFilterParamName(),t}))}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"counts",{get:function(){return this._counts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterClient",{get:function(){return this._filterClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._displayName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValues",{get:function(){return this._selectedValues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t.prototype.getQueryParam=function(t){var e={};return e[this.getFilterParamName()]='"'+t+'"',e},t.prototype.getFilterParamName=function(){return"facet.filter."+this.config.baseName},t.prototype.getSelectedParameters=function(){var t,e=this;return(null===(t=this.selectedValues)||void 0===t?void 0:t.map((function(t){return e.getQueryParam(t)})))||[]},t.prototype.isValueAllowed=function(t){return this.counts.map((function(t){return t.value})).includes(t)},t.prototype.setSelectedValues=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._selectedValues=t,this},t.prototype.setDisplayName=function(t){return this._displayName=t,this},t.prototype.reset=function(){var t=this.filterClient.parameterList.deleteAll(this.getFilterParamName());return this.filterClient.parameterList=t,this.setSelectedValues.apply(this,[]),this},t.prototype.filter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return I(this,void 0,void 0,(function(){var e,r,n,o=this;return j(this,(function(i){if(!this.config.multiSelect&&t.length>1)throw new Error("This is not a multi value facet. You can only pass one value to filter().");return t.forEach((function(t){if(o.type!==typeof t)throw new Error("The facet "+o.config.baseName+" is of type "+o.type+", but the value that was passed ("+t+") is of type "+typeof t);if(!o.isValueAllowed(t))throw new Error("The passed value "+t+" is not allowed in this facette")})),e=t.map((function(t){return o.getQueryParam(t)})),r=(n=this.filterClient.parameterList.deleteAll(this.getFilterParamName())).add.apply(n,e),this.filterClient.parameterList=r.updateFirst({haupia_start:"0"}).updateFirst({haupia_pageNumber:"0"}),[2,this.search()]}))}))},t.prototype.search=function(){return I(this,void 0,void 0,(function(){var t,e;return j(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.filterClient.fetch()];case 1:return t=r.sent(),[2,new In(this.filterClient,t)];case 2:throw e=r.sent(),new Error(e);case 3:return[2]}}))}))},t}(),T={};function M(t){t&&(t.value=!0)}function k(){}function z(t){return void 0===t.size&&(t.size=t.__iterate(C)),t.size}function B(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?z(t)+e:e}function C(){return!0}function N(t,e,r){return(0===t&&!U(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function L(t,e){return R(t,e,0)}function q(t,e){return R(t,e,e)}function R(t,e,r){return void 0===t?r:U(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function U(t){return t<0||0===t&&1/t==-1/0}function F(t){return Boolean(t&&t["@@__IMMUTABLE_ITERABLE__@@"])}function W(t){return Boolean(t&&t["@@__IMMUTABLE_KEYED__@@"])}function V(t){return Boolean(t&&t["@@__IMMUTABLE_INDEXED__@@"])}function H(t){return W(t)||V(t)}var K=function(t){return F(t)?t:ht(t)},G=function(t){function e(t){return W(t)?t:lt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(K),$=function(t){function e(t){return V(t)?t:yt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(K),Y=function(t){function e(t){return F(t)&&!H(t)?t:vt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(K);K.Keyed=G,K.Indexed=$,K.Set=Y;function J(t){return Boolean(t&&t["@@__IMMUTABLE_SEQ__@@"])}function Q(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}function X(t){return F(t)||Q(t)}var Z="@@__IMMUTABLE_ORDERED__@@";function tt(t){return Boolean(t&&t[Z])}var et="function"==typeof Symbol&&Symbol.iterator,rt=et||"@@iterator",nt=function(t){this.next=t};function ot(t,e,r,n){var o=0===t?e:1===t?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function it(){return{value:void 0,done:!0}}function ut(t){return!!ct(t)}function at(t){return t&&"function"==typeof t.next}function st(t){var e=ct(t);return e&&e.call(t)}function ct(t){var e=t&&(et&&t[et]||t["@@iterator"]);if("function"==typeof e)return e}nt.prototype.toString=function(){return"[Iterator]"},nt.KEYS=0,nt.VALUES=1,nt.ENTRIES=2,nt.prototype.inspect=nt.prototype.toSource=function(){return this.toString()},nt.prototype[rt]=function(){return this};var ft=Object.prototype.hasOwnProperty;function pt(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var ht=function(t){function e(t){return null==t?_t():X(t)?t.toSeq():function(t){var e=Et(t);if(e)return e;if("object"==typeof t)return new mt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,o=0;o!==n;){var i=r[e?n-++o:o++];if(!1===t(i[1],i[0],this))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,o=0;return new nt((function(){if(o===n)return{value:void 0,done:!0};var i=r[e?n-++o:o++];return ot(t,i[0],i[1])}))}return this.__iteratorUncached(t,e)},e}(K),lt=function(t){function e(t){return null==t?_t().toKeyedSeq():F(t)?W(t)?t.toSeq():t.fromEntrySeq():Q(t)?t.toSeq():wt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(ht),yt=function(t){function e(t){return null==t?_t():F(t)?W(t)?t.entrySeq():t.toIndexedSeq():Q(t)?t.toSeq().entrySeq():St(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(ht),vt=function(t){function e(t){return(F(t)&&!H(t)?t:yt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(ht);ht.isSeq=J,ht.Keyed=lt,ht.Set=vt,ht.Indexed=yt,ht.prototype["@@__IMMUTABLE_SEQ__@@"]=!0;var dt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[B(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,o=0;o!==n;){var i=e?n-++o:o++;if(!1===t(r[i],i,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,o=0;return new nt((function(){if(o===n)return{value:void 0,done:!0};var i=e?n-++o:o++;return ot(t,i,r[i])}))},e}(yt),mt=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return ft.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,o=n.length,i=0;i!==o;){var u=n[e?o-++i:i++];if(!1===t(r[u],u,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,o=n.length,i=0;return new nt((function(){if(i===o)return{value:void 0,done:!0};var u=n[e?o-++i:i++];return ot(t,u,r[u])}))},e}(lt);mt.prototype[Z]=!0;var bt,gt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=st(this._collection),n=0;if(at(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,n++,this););return n},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=st(this._collection);if(!at(r))return new nt(it);var n=0;return new nt((function(){var e=r.next();return e.done?e:ot(t,n++,e.value)}))},e}(yt);function _t(){return bt||(bt=new dt([]))}function wt(t){var e=Array.isArray(t)?new dt(t):ut(t)?new gt(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new mt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function St(t){var e=Et(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Et(t){return pt(t)?new dt(t):ut(t)?new gt(t):void 0}function Pt(t){return Boolean(t&&t["@@__IMMUTABLE_MAP__@@"])}function At(t){return Pt(t)&&tt(t)}function xt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function Ot(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(xt(t)&&xt(e)&&t.equals(e))}var It="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function jt(t){return t>>>1&1073741824|3221225471&t}var Dt=Object.prototype.valueOf;function Tt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return jt(e)}(t);case"string":return t.length>qt?function(t){var e=Ft[t];void 0===e&&(e=Mt(t),Ut===Rt&&(Ut=0,Ft={}),Ut++,Ft[t]=e);return e}(t):Mt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?jt(t.hashCode(t)):(t.valueOf!==Dt&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(Ct&&void 0!==(e=Bt.get(t)))return e;if(void 0!==(e=t[Lt]))return e;if(!zt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Lt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++Nt,1073741824&Nt&&(Nt=0);if(Ct)Bt.set(t,e);else{if(void 0!==kt&&!1===kt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(zt)Object.defineProperty(t,Lt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Lt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Lt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return Mt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function Mt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return jt(e)}var kt=Object.isExtensible,zt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var Bt,Ct="function"==typeof WeakMap;Ct&&(Bt=new WeakMap);var Nt=0,Lt="__immutablehash__";"function"==typeof Symbol&&(Lt=Symbol(Lt));var qt=16,Rt=255,Ut=0,Ft={},Wt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Yt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=$t(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,n){return t(e,n,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(lt);Wt.prototype[Z]=!0;var Vt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&z(this),this._iter.__iterate((function(o){return t(o,e?r.size-++n:n++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(1,e),o=0;return e&&z(this),new nt((function(){var i=n.next();return i.done?i:ot(t,e?r.size-++o:o++,i.value,i)}))},e}(yt),Ht=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new nt((function(){var e=r.next();return e.done?e:ot(t,e.value,e.value,e)}))},e}(vt),Kt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){ue(e);var n=F(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new nt((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){ue(n);var o=F(n);return ot(t,o?n.get(0):n[0],o?n.get(1):n[1],e)}}}))},e}(lt);function Gt(t){var e=se(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=ce,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(2===e){var n=t.__iterator(e,r);return new nt((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,r)},e}function $t(t,e,r){var n=se(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,o){var i=t.get(n,T);return i===T?o:e.call(r,i,n,t)},n.__iterateUncached=function(n,o){var i=this;return t.__iterate((function(t,o,u){return!1!==n(e.call(r,t,o,u),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=t.__iterator(2,o);return new nt((function(){var o=i.next();if(o.done)return o;var u=o.value,a=u[0];return ot(n,a,e.call(r,u[1],a,t),o)}))},n}function Yt(t,e){var r=this,n=se(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Gt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=ce,n.__iterate=function(r,n){var o=this,i=0;return n&&z(t),t.__iterate((function(t,u){return r(t,e?u:n?o.size-++i:i++,o)}),!n)},n.__iterator=function(n,o){var i=0;o&&z(t);var u=t.__iterator(2,!o);return new nt((function(){var t=u.next();if(t.done)return t;var a=t.value;return ot(n,e?a[0]:o?r.size-++i:i++,a[1],t)}))},n}function Jt(t,e,r,n){var o=se(t);return n&&(o.has=function(n){var o=t.get(n,T);return o!==T&&!!e.call(r,o,n,t)},o.get=function(n,o){var i=t.get(n,T);return i!==T&&e.call(r,i,n,t)?i:o}),o.__iterateUncached=function(o,i){var u=this,a=0;return t.__iterate((function(t,i,s){if(e.call(r,t,i,s))return a++,o(t,n?i:a-1,u)}),i),a},o.__iteratorUncached=function(o,i){var u=t.__iterator(2,i),a=0;return new nt((function(){for(;;){var i=u.next();if(i.done)return i;var s=i.value,c=s[0],f=s[1];if(e.call(r,f,c,t))return ot(o,n?c:a++,f,i)}}))},o}function Qt(t,e,r,n){var o=t.size;if(N(e,r,o))return t;var i=L(e,o),u=q(r,o);if(i!=i||u!=u)return Qt(t.toSeq().cacheResult(),e,r,n);var a,s=u-i;s==s&&(a=s<0?0:s);var c=se(t);return c.size=0===a?a:t.size&&a||void 0,!n&&J(t)&&a>=0&&(c.get=function(e,r){return(e=B(this,e))>=0&&e<a?t.get(e+i,r):r}),c.__iterateUncached=function(e,r){var o=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var u=0,s=!0,c=0;return t.__iterate((function(t,r){if(!s||!(s=u++<i))return c++,!1!==e(t,n?r:c-1,o)&&c!==a})),c},c.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);if(0===a)return new nt(it);var o=t.__iterator(e,r),u=0,s=0;return new nt((function(){for(;u++<i;)o.next();if(++s>a)return{value:void 0,done:!0};var t=o.next();return n||1===e||t.done?t:ot(e,s-1,0===e?void 0:t.value[1],t)}))},c}function Xt(t,e,r,n){var o=se(t);return o.__iterateUncached=function(o,i){var u=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,s=0;return t.__iterate((function(t,i,c){if(!a||!(a=e.call(r,t,i,c)))return s++,o(t,n?i:s-1,u)})),s},o.__iteratorUncached=function(o,i){var u=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(2,i),s=!0,c=0;return new nt((function(){var t,i,f;do{if((t=a.next()).done)return n||1===o?t:ot(o,c++,0===o?void 0:t.value[1],t);var p=t.value;i=p[0],f=p[1],s&&(s=e.call(r,f,i,u))}while(s);return 2===o?t:ot(o,i,f,t)}))},o}function Zt(t,e){var r=W(t),n=[t].concat(e).map((function(t){return F(t)?r&&(t=G(t)):t=r?wt(t):St(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var o=n[0];if(o===t||r&&W(o)||V(t)&&V(o))return o}var i=new dt(n);return r?i=i.toKeyedSeq():V(t)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),i}function te(t,e,r){var n=se(t);return n.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var u=0,a=!1;return function t(s,c){s.__iterate((function(i,s){return(!e||c<e)&&F(i)?t(i,c+1):(u++,!1===o(i,r?s:u-1,n)&&(a=!0)),!a}),i)}(t,0),u},n.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var i=t.__iterator(n,o),u=[],a=0;return new nt((function(){for(;i;){var t=i.next();if(!1===t.done){var s=t.value;if(2===n&&(s=s[1]),e&&!(u.length<e)||!F(s))return r?t:ot(n,a++,s,t);u.push(i),i=s.__iterator(n,o)}else i=u.pop()}return{value:void 0,done:!0}}))},n}function ee(t,e,r){e||(e=fe);var n=W(t),o=0,i=t.toSeq().map((function(e,n){return[n,e,o++,r?r(e,n,t):e]})).valueSeq().toArray();return i.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),n?lt(i):V(t)?yt(i):vt(i)}function re(t,e,r){if(e||(e=fe),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return ne(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return ne(e,t,r)?r:t}))}function ne(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function oe(t,e,r,n){var o=se(t),i=new dt(r).map((function(t){return t.size}));return o.size=n?i.max():i.min(),o.__iterate=function(t,e){for(var r,n=this.__iterator(1,e),o=0;!(r=n.next()).done&&!1!==t(r.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=r.map((function(t){return t=K(t),st(o?t.reverse():t)})),u=0,a=!1;return new nt((function(){var r;return a||(r=i.map((function(t){return t.next()})),a=n?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),a?{value:void 0,done:!0}:ot(t,u++,e.apply(null,r.map((function(t){return t.value}))))}))},o}function ie(t,e){return t===e?t:J(t)?e:t.constructor(e)}function ue(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ae(t){return W(t)?G:V(t)?$:Y}function se(t){return Object.create((W(t)?lt:V(t)?yt:vt).prototype)}function ce(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ht.prototype.cacheResult.call(this)}function fe(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function pe(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function he(t,e){if(!t)throw new Error(e)}function le(t){he(t!==1/0,"Cannot perform this action with an infinite size.")}function ye(t){if(pt(t)&&"string"!=typeof t)return t;if(tt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function ve(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function de(t){return"object"==typeof t&&(X(t)||Array.isArray(t)||ve(t))}function me(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function be(t,e){return X(t)?t.has(e):de(t)&&ft.call(t,e)}function ge(t,e,r){return X(t)?t.get(e,r):be(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function _e(t){if(Array.isArray(t))return pe(t);var e={};for(var r in t)ft.call(t,r)&&(e[r]=t[r]);return e}function we(t,e){if(!de(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(X(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!ft.call(t,e))return t;var r=_e(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Se(t,e,r){if(!de(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(X(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(ft.call(t,e)&&r===t[e])return t;var n=_e(t);return n[e]=r,n}function Ee(t,e,r,n){n||(n=r,r=void 0);var o=function t(e,r,n,o,i,u){var a=r===T;if(o===n.length){var s=a?i:r,c=u(s);return c===s?r:c}if(!a&&!de(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,o).map(me)+"]: "+r);var f=n[o],p=a?T:ge(r,f,T),h=t(p===T?e:X(p),p,n,o+1,i,u);return h===p?r:h===T?we(r,f):Se(a?e?rr():{}:r,f,h)}(X(t),t,ye(e),0,r,n);return o===T?r:o}function Pe(t,e,r){return Ee(t,e,T,(function(){return r}))}function Ae(t,e){return Pe(this,t,e)}function xe(t,e){return Ee(t,e,(function(){return T}))}function Oe(t){return xe(this,t)}function Ie(t,e,r,n){return Ee(t,[e],r,n)}function je(t,e,r){return 1===arguments.length?t(this):Ie(this,t,e,r)}function De(t,e,r){return Ee(this,t,e,r)}function Te(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ke(this,t)}function Me(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return ke(this,e,t)}function ke(t,e,r){for(var n=[],o=0;o<e.length;o++){var i=G(e[o]);0!==i.size&&n.push(i)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var e=r?function(e,n){Ie(t,n,T,(function(t){return t===T?e:r(t,e,n)}))}:function(e,r){t.set(r,e)},o=0;o<n.length;o++)n[o].forEach(e)})):t.constructor(n[0])}function ze(t,e,r){return Be(t,e,function(t){return function e(r,n,o){return de(r)&&de(n)?Be(r,[n],e):t?t(r,n,o):n}}(r))}function Be(t,e,r){if(!de(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(X(t))return"function"==typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),o=t,i=n?$:G,u=n?function(e){o===t&&(o=_e(o)),o.push(e)}:function(e,n){var i=ft.call(o,n),u=i&&r?r(o[n],e,n):e;i&&u===o[n]||(o===t&&(o=_e(o)),o[n]=u)},a=0;a<e.length;a++)i(e[a]).forEach(u);return o}function Ce(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ze(this,t)}function Ne(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ze(this,e,t)}function Le(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ee(this,t,rr(),(function(t){return Be(t,e)}))}function qe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ee(this,t,rr(),(function(t){return ze(t,e)}))}function Re(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Ue(){return this.__ownerID?this:this.__ensureOwner(new k)}function Fe(){return this.__ensureOwner()}function We(){return this.__altered}Vt.prototype.cacheResult=Wt.prototype.cacheResult=Ht.prototype.cacheResult=Kt.prototype.cacheResult=ce;var Ve=function(t){function e(e){return null==e?rr():Pt(e)&&!tt(e)?e:rr().withMutations((function(r){var n=t(e);le(n.size),n.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return rr().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return nr(this,t,e)},e.prototype.remove=function(t){return nr(this,t,T)},e.prototype.deleteAll=function(t){var e=K(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):rr()},e.prototype.sort=function(t){return Or(ee(this,t))},e.prototype.sortBy=function(t,e){return Or(ee(this,e,t))},e.prototype.map=function(t,e){return this.withMutations((function(r){r.forEach((function(n,o){r.set(o,t.call(e,n,o,r))}))}))},e.prototype.__iterator=function(t,e){return new Xe(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?er(this.size,this._root,t,this.__hash):0===this.size?rr():(this.__ownerID=t,this.__altered=!1,this)},e}(G);Ve.isMap=Pt;var He=Ve.prototype;He["@@__IMMUTABLE_MAP__@@"]=!0,He.delete=He.remove,He.removeAll=He.deleteAll,He.setIn=Ae,He.removeIn=He.deleteIn=Oe,He.update=je,He.updateIn=De,He.merge=He.concat=Te,He.mergeWith=Me,He.mergeDeep=Ce,He.mergeDeepWith=Ne,He.mergeIn=Le,He.mergeDeepIn=qe,He.withMutations=Re,He.wasAltered=We,He.asImmutable=Fe,He["@@transducer/init"]=He.asMutable=Ue,He["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},He["@@transducer/result"]=function(t){return t.asImmutable()};var Ke=function(t,e){this.ownerID=t,this.entries=e};Ke.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,u=o.length;i<u;i++)if(Ot(r,o[i][0]))return o[i][1];return n},Ke.prototype.update=function(t,e,r,n,o,i,u){for(var a=o===T,s=this.entries,c=0,f=s.length;c<f&&!Ot(n,s[c][0]);c++);var p=c<f;if(p?s[c][1]===o:a)return this;if(M(u),(a||!p)&&M(i),!a||1!==s.length){if(!p&&!a&&s.length>=cr)return function(t,e,r,n){t||(t=new k);for(var o=new Je(t,Tt(r),[r,n]),i=0;i<e.length;i++){var u=e[i];o=o.update(t,0,void 0,u[0],u[1])}return o}(t,s,n,o);var h=t&&t===this.ownerID,l=h?s:pe(s);return p?a?c===f-1?l.pop():l[c]=l.pop():l[c]=[n,o]:l.push([n,o]),h?(this.entries=l,this):new Ke(t,l)}};var Ge=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Ge.prototype.get=function(t,e,r,n){void 0===e&&(e=Tt(r));var o=1<<(31&(0===t?e:e>>>t)),i=this.bitmap;return 0==(i&o)?n:this.nodes[ar(i&o-1)].get(t+5,e,r,n)},Ge.prototype.update=function(t,e,r,n,o,i,u){void 0===r&&(r=Tt(n));var a=31&(0===e?r:r>>>e),s=1<<a,c=this.bitmap,f=0!=(c&s);if(!f&&o===T)return this;var p=ar(c&s-1),h=this.nodes,l=f?h[p]:void 0,y=or(l,t,e+5,r,n,o,i,u);if(y===l)return this;if(!f&&y&&h.length>=fr)return function(t,e,r,n,o){for(var i=0,u=new Array(32),a=0;0!==r;a++,r>>>=1)u[a]=1&r?e[i++]:void 0;return u[n]=o,new $e(t,i+1,u)}(t,h,c,a,y);if(f&&!y&&2===h.length&&ir(h[1^p]))return h[1^p];if(f&&y&&1===h.length&&ir(y))return y;var v=t&&t===this.ownerID,d=f?y?c:c^s:c|s,m=f?y?sr(h,p,y,v):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),i=0,u=0;u<n;u++)u===e&&(i=1),o[u]=t[u+i];return o}(h,p,v):function(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var i=new Array(o),u=0,a=0;a<o;a++)a===e?(i[a]=r,u=-1):i[a]=t[a+u];return i}(h,p,y,v);return v?(this.bitmap=d,this.nodes=m,this):new Ge(t,d,m)};var $e=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};$e.prototype.get=function(t,e,r,n){void 0===e&&(e=Tt(r));var o=31&(0===t?e:e>>>t),i=this.nodes[o];return i?i.get(t+5,e,r,n):n},$e.prototype.update=function(t,e,r,n,o,i,u){void 0===r&&(r=Tt(n));var a=31&(0===e?r:r>>>e),s=o===T,c=this.nodes,f=c[a];if(s&&!f)return this;var p=or(f,t,e+5,r,n,o,i,u);if(p===f)return this;var h=this.count;if(f){if(!p&&--h<pr)return function(t,e,r,n){for(var o=0,i=0,u=new Array(r),a=0,s=1,c=e.length;a<c;a++,s<<=1){var f=e[a];void 0!==f&&a!==n&&(o|=s,u[i++]=f)}return new Ge(t,o,u)}(t,c,h,a)}else h++;var l=t&&t===this.ownerID,y=sr(c,a,p,l);return l?(this.count=h,this.nodes=y,this):new $e(t,h,y)};var Ye=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};Ye.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,u=o.length;i<u;i++)if(Ot(r,o[i][0]))return o[i][1];return n},Ye.prototype.update=function(t,e,r,n,o,i,u){void 0===r&&(r=Tt(n));var a=o===T;if(r!==this.keyHash)return a?this:(M(u),M(i),ur(this,t,e,r,[n,o]));for(var s=this.entries,c=0,f=s.length;c<f&&!Ot(n,s[c][0]);c++);var p=c<f;if(p?s[c][1]===o:a)return this;if(M(u),(a||!p)&&M(i),a&&2===f)return new Je(t,this.keyHash,s[1^c]);var h=t&&t===this.ownerID,l=h?s:pe(s);return p?a?c===f-1?l.pop():l[c]=l.pop():l[c]=[n,o]:l.push([n,o]),h?(this.entries=l,this):new Ye(t,this.keyHash,l)};var Je=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};Je.prototype.get=function(t,e,r,n){return Ot(r,this.entry[0])?this.entry[1]:n},Je.prototype.update=function(t,e,r,n,o,i,u){var a=o===T,s=Ot(n,this.entry[0]);return(s?o===this.entry[1]:a)?this:(M(u),a?void M(i):s?t&&t===this.ownerID?(this.entry[1]=o,this):new Je(t,this.keyHash,[n,o]):(M(i),ur(this,t,e,Tt(n),[n,o])))},Ke.prototype.iterate=Ye.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===t(r[e?o-n:n]))return!1},Ge.prototype.iterate=$e.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[e?o-n:n];if(i&&!1===i.iterate(t,e))return!1}},Je.prototype.iterate=function(t,e){return t(this.entry)};var Qe,Xe=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&tr(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,o=void 0;if(r.entry){if(0===n)return Ze(t,r.entry)}else if(r.entries){if(n<=(o=r.entries.length-1))return Ze(t,r.entries[this._reverse?o-n:n])}else if(n<=(o=r.nodes.length-1)){var i=r.nodes[this._reverse?o-n:n];if(i){if(i.entry)return Ze(t,i.entry);e=this._stack=tr(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(nt);function Ze(t,e){return ot(t,e[0],e[1])}function tr(t,e){return{node:t,index:0,__prev:e}}function er(t,e,r,n){var o=Object.create(He);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function rr(){return Qe||(Qe=er(0))}function nr(t,e,r){var n,o;if(t._root){var i={value:!1},u={value:!1};if(n=or(t._root,t.__ownerID,0,void 0,e,r,i,u),!u.value)return t;o=t.size+(i.value?r===T?-1:1:0)}else{if(r===T)return t;o=1,n=new Ke(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?er(o,n):rr()}function or(t,e,r,n,o,i,u,a){return t?t.update(e,r,n,o,i,u,a):i===T?t:(M(a),M(u),new Je(e,n,[o,i]))}function ir(t){return t.constructor===Je||t.constructor===Ye}function ur(t,e,r,n,o){if(t.keyHash===n)return new Ye(e,n,[t.entry,o]);var i,u=31&(0===r?t.keyHash:t.keyHash>>>r),a=31&(0===r?n:n>>>r),s=u===a?[ur(t,e,r+5,n,o)]:(i=new Je(e,n,o),u<a?[t,i]:[i,t]);return new Ge(e,1<<u|1<<a,s)}function ar(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function sr(t,e,r,n){var o=n?t:pe(t);return o[e]=r,o}var cr=8,fr=16,pr=8;function hr(t){return Boolean(t&&t["@@__IMMUTABLE_LIST__@@"])}var lr=function(t){function e(e){var r=_r();if(null==e)return r;if(hr(e))return e;var n=t(e),o=n.size;return 0===o?r:(le(o),o>0&&o<32?gr(0,o,5,null,new vr(n.toArray())):r.withMutations((function(t){t.setSize(o),n.forEach((function(e,r){return t.set(r,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=B(this,t))>=0&&t<this.size){var r=Er(this,t+=this._origin);return r&&r.array[31&t]}return e},e.prototype.set=function(t,e){return function(t,e,r){if((e=B(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Pr(t,e).set(0,r):Pr(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,o=t._root,i={value:!1};e>=Ar(t._capacity)?n=wr(n,t.__ownerID,0,e,r,i):o=wr(o,t.__ownerID,t._level,e,r,i);if(!i.value)return t;if(t.__ownerID)return t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return gr(t._origin,t._capacity,t._level,o,n)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):_r()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){Pr(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},e.prototype.pop=function(){return Pr(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Pr(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},e.prototype.shift=function(){return Pr(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++){var o=e[n],i=t("string"!=typeof o&&ut(o)?o:[o]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(t){r.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(r[0])},e.prototype.setSize=function(t){return Pr(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){for(var o=0;o<r.size;o++)n.set(o,t.call(e,n.get(o),o,n))}))},e.prototype.slice=function(t,e){var r=this.size;return N(t,e,r)?this:Pr(this,L(t,r),q(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,n=br(this,e);return new nt((function(){var o=n();return o===mr?{value:void 0,done:!0}:ot(t,e?--r:r++,o)}))},e.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,o=br(this,e);(r=o())!==mr&&!1!==t(r,e?--n:n++,this););return n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?gr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?_r():(this.__ownerID=t,this.__altered=!1,this)},e}($);lr.isList=hr;var yr=lr.prototype;yr["@@__IMMUTABLE_LIST__@@"]=!0,yr.delete=yr.remove,yr.merge=yr.concat,yr.setIn=Ae,yr.deleteIn=yr.removeIn=Oe,yr.update=je,yr.updateIn=De,yr.mergeIn=Le,yr.mergeDeepIn=qe,yr.withMutations=Re,yr.wasAltered=We,yr.asImmutable=Fe,yr["@@transducer/init"]=yr.asMutable=Ue,yr["@@transducer/step"]=function(t,e){return t.push(e)},yr["@@transducer/result"]=function(t){return t.asImmutable()};var vr=function(t,e){this.array=t,this.ownerID=e};vr.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&31;if(n>=this.array.length)return new vr([],t);var o,i=0===n;if(e>0){var u=this.array[n];if((o=u&&u.removeBefore(t,e-5,r))===u&&i)return this}if(i&&!o)return this;var a=Sr(this,t);if(!i)for(var s=0;s<n;s++)a.array[s]=void 0;return o&&(a.array[n]=o),a},vr.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&31;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((n=i&&i.removeAfter(t,e-5,r))===i&&o===this.array.length-1)return this}var u=Sr(this,t);return u.array.splice(o+1),n&&(u.array[o]=n),u};var dr,mr={};function br(t,e){var r=t._origin,n=t._capacity,o=Ar(n),i=t._tail;return u(t._root,t._level,0);function u(t,a,s){return 0===a?function(t,u){var a=u===o?i&&i.array:t&&t.array,s=u>r?0:r-u,c=n-u;c>32&&(c=32);return function(){if(s===c)return mr;var t=e?--c:s++;return a&&a[t]}}(t,s):function(t,o,i){var a,s=t&&t.array,c=i>r?0:r-i>>o,f=1+(n-i>>o);f>32&&(f=32);return function(){for(;;){if(a){var t=a();if(t!==mr)return t;a=null}if(c===f)return mr;var r=e?--f:c++;a=u(s&&s[r],o-5,i+(r<<o))}}}(t,a,s)}}function gr(t,e,r,n,o,i,u){var a=Object.create(yr);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=o,a.__ownerID=i,a.__hash=u,a.__altered=!1,a}function _r(){return dr||(dr=gr(0,0,5))}function wr(t,e,r,n,o,i){var u,a=n>>>r&31,s=t&&a<t.array.length;if(!s&&void 0===o)return t;if(r>0){var c=t&&t.array[a],f=wr(c,e,r-5,n,o,i);return f===c?t:((u=Sr(t,e)).array[a]=f,u)}return s&&t.array[a]===o?t:(i&&M(i),u=Sr(t,e),void 0===o&&a===u.array.length-1?u.array.pop():u.array[a]=o,u)}function Sr(t,e){return e&&t&&e===t.ownerID?t:new vr(t?t.array.slice():[],e)}function Er(t,e){if(e>=Ar(t._capacity))return t._tail;if(e<1<<t._level+5){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&31],n-=5;return r}}function Pr(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new k,o=t._origin,i=t._capacity,u=o+e,a=void 0===r?i:r<0?i+r:o+r;if(u===o&&a===i)return t;if(u>=a)return t.clear();for(var s=t._level,c=t._root,f=0;u+f<0;)c=new vr(c&&c.array.length?[void 0,c]:[],n),f+=1<<(s+=5);f&&(u+=f,o+=f,a+=f,i+=f);for(var p=Ar(i),h=Ar(a);h>=1<<s+5;)c=new vr(c&&c.array.length?[c]:[],n),s+=5;var l=t._tail,y=h<p?Er(t,a-1):h>p?new vr([],n):l;if(l&&h>p&&u<i&&l.array.length){for(var v=c=Sr(c,n),d=s;d>5;d-=5){var m=p>>>d&31;v=v.array[m]=Sr(v.array[m],n)}v.array[p>>>5&31]=l}if(a<i&&(y=y&&y.removeAfter(n,0,a)),u>=h)u-=h,a-=h,s=5,c=null,y=y&&y.removeBefore(n,0,u);else if(u>o||h<p){for(f=0;c;){var b=u>>>s&31;if(b!==h>>>s&31)break;b&&(f+=(1<<s)*b),s-=5,c=c.array[b]}c&&u>o&&(c=c.removeBefore(n,s,u-f)),c&&h<p&&(c=c.removeAfter(n,s,h-f)),f&&(u-=f,a-=f)}return t.__ownerID?(t.size=a-u,t._origin=u,t._capacity=a,t._level=s,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):gr(u,a,s,c,y)}function Ar(t){return t<32?0:t-1>>>5<<5}var xr,Or=function(t){function e(t){return null==t?jr():At(t)?t:jr().withMutations((function(e){var r=G(t);le(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):jr()},e.prototype.set=function(t,e){return Dr(this,t,e)},e.prototype.remove=function(t){return Dr(this,t,T)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Ir(e,r,t,this.__hash):0===this.size?jr():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(Ve);function Ir(t,e,r,n){var o=Object.create(Or.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}function jr(){return xr||(xr=Ir(rr(),_r()))}function Dr(t,e,r){var n,o,i=t._map,u=t._list,a=i.get(e),s=void 0!==a;if(r===T){if(!s)return t;u.size>=32&&u.size>=2*i.size?(n=(o=u.filter((function(t,e){return void 0!==t&&a!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=i.remove(e),o=a===u.size-1?u.pop():u.set(a,void 0))}else if(s){if(r===u.get(a)[1])return t;n=i,o=u.set(a,[e,r])}else n=i.set(e,u.size),o=u.set(u.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):Ir(n,o)}Or.isOrderedMap=At,Or.prototype[Z]=!0,Or.prototype.delete=Or.prototype.remove;function Tr(t){return Boolean(t&&t["@@__IMMUTABLE_STACK__@@"])}var Mr=function(t){function e(t){return null==t?Cr():Tr(t)?t:Cr().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=B(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Br(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Tr(e))return e;le(e.size);var r=this.size,n=this._head;return e.__iterate((function(t){r++,n={value:t,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Br(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Cr()},e.prototype.slice=function(e,r){if(N(e,r,this.size))return this;var n=L(e,this.size);if(q(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var o=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Br(o,i)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Br(this.size,this._head,t,this.__hash):0===this.size?Cr():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new dt(this.toArray()).__iterate((function(e,n){return t(e,n,r)}),e);for(var n=0,o=this._head;o&&!1!==t(o.value,n++,this);)o=o.next;return n},e.prototype.__iterator=function(t,e){if(e)return new dt(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new nt((function(){if(n){var e=n.value;return n=n.next,ot(t,r++,e)}return{value:void 0,done:!0}}))},e}($);Mr.isStack=Tr;var kr,zr=Mr.prototype;function Br(t,e,r,n){var o=Object.create(zr);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Cr(){return kr||(kr=Br(0))}zr["@@__IMMUTABLE_STACK__@@"]=!0,zr.shift=zr.pop,zr.unshift=zr.push,zr.unshiftAll=zr.pushAll,zr.withMutations=Re,zr.wasAltered=We,zr.asImmutable=Fe,zr["@@transducer/init"]=zr.asMutable=Ue,zr["@@transducer/step"]=function(t,e){return t.unshift(e)},zr["@@transducer/result"]=function(t){return t.asImmutable()};function Nr(t){return Boolean(t&&t["@@__IMMUTABLE_SET__@@"])}function Lr(t){return Nr(t)&&tt(t)}function qr(t,e){if(t===e)return!0;if(!F(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||W(t)!==W(e)||V(t)!==V(e)||tt(t)!==tt(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!H(t);if(tt(t)){var n=t.entries();return e.every((function(t,e){var o=n.next().value;return o&&Ot(o[1],t)&&(r||Ot(o[0],e))}))&&n.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var u=!0,a=e.__iterate((function(e,n){if(r?!t.has(e):o?!Ot(e,t.get(n,T)):!Ot(t.get(n,T),e))return u=!1,!1}));return u&&t.size===a}function Rr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ur(t){if(!t||"object"!=typeof t)return t;if(!F(t)){if(!de(t))return t;t=ht(t)}if(W(t)){var e={};return t.__iterate((function(t,r){e[r]=Ur(t)})),e}var r=[];return t.__iterate((function(t){r.push(Ur(t))})),r}var Fr=function(t){function e(e){return null==e?Gr():Nr(e)&&!tt(e)?e:Gr().withMutations((function(r){var n=t(e);le(n.size),n.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(G(t).keySeq())},e.intersect=function(t){return(t=K(t).toArray()).length?Vr.intersect.apply(e(t.pop()),t):Gr()},e.union=function(t){return(t=K(t).toArray()).length?Vr.union.apply(e(t.pop()),t):Gr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Hr(this,this._map.set(t,t))},e.prototype.remove=function(t){return Hr(this,this._map.remove(t))},e.prototype.clear=function(){return Hr(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,n=[],o=[];return this.forEach((function(i){var u=t.call(e,i,i,r);u!==i&&(n.push(i),o.push(u))})),this.withMutations((function(t){n.forEach((function(e){return t.remove(e)})),o.forEach((function(e){return t.add(e)}))}))},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var n=0;n<e.length;n++)t(e[n]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return hn(ee(this,t))},e.prototype.sortBy=function(t,e){return hn(ee(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(Y);Fr.isSet=Nr;var Wr,Vr=Fr.prototype;function Hr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Kr(t,e){var r=Object.create(Vr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Gr(){return Wr||(Wr=Kr(rr()))}Vr["@@__IMMUTABLE_SET__@@"]=!0,Vr.delete=Vr.remove,Vr.merge=Vr.concat=Vr.union,Vr.withMutations=Re,Vr.asImmutable=Fe,Vr["@@transducer/init"]=Vr.asMutable=Ue,Vr["@@transducer/step"]=function(t,e){return t.add(e)},Vr["@@transducer/result"]=function(t){return t.asImmutable()},Vr.__empty=Gr,Vr.__make=Kr;var $r,Yr=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(he(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if($r)return $r;$r=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+B(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return N(t,r,this.size)?this:(t=L(t,this.size),(r=q(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,o=e?this._start+(r-1)*n:this._start,i=0;i!==r&&!1!==t(o,e?r-++i:i++,this);)o+=e?-n:n;return i},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,o=e?this._start+(r-1)*n:this._start,i=0;return new nt((function(){if(i===r)return{value:void 0,done:!0};var u=o;return o+=e?-n:n,ot(t,e?r-++i:i++,u)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:qr(this,t)},e}(yt);function Jr(t,e,r){for(var n=ye(e),o=0;o!==n.length;)if((t=ge(t,n[o++],T))===T)return r;return t}function Qr(t,e){return Jr(this,t,e)}function Xr(t,e){return Jr(t,e,T)!==T}function Zr(){le(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}K.isIterable=F,K.isKeyed=W,K.isIndexed=V,K.isAssociative=H,K.isOrdered=tt,K.Iterator=nt,Rr(K,{toArray:function(){le(this.size);var t=new Array(this.size||0),e=W(this),r=0;return this.__iterate((function(n,o){t[r++]=e?[o,n]:n})),t},toIndexedSeq:function(){return new Vt(this)},toJS:function(){return Ur(this)},toKeyedSeq:function(){return new Wt(this,!0)},toMap:function(){return Ve(this.toKeyedSeq())},toObject:Zr,toOrderedMap:function(){return Or(this.toKeyedSeq())},toOrderedSet:function(){return hn(W(this)?this.valueSeq():this)},toSet:function(){return Fr(W(this)?this.valueSeq():this)},toSetSeq:function(){return new Ht(this)},toSeq:function(){return V(this)?this.toIndexedSeq():W(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Mr(W(this)?this.valueSeq():this)},toList:function(){return lr(W(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ie(this,Zt(this,t))},includes:function(t){return this.some((function(e){return Ot(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){le(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!t.call(e,n,o,i))return r=!1,!1})),r},filter:function(t,e){return ie(this,Jt(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return le(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){le(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return ie(this,$t(this,t,e))},reduce:function(t,e,r){return nn(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return nn(this,t,e,r,arguments.length<2,!0)},reverse:function(){return ie(this,Yt(this,!0))},slice:function(t,e){return ie(this,Qt(this,t,e,!0))},some:function(t,e){return!this.every(an(t),e)},sort:function(t){return ie(this,ee(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return z(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=Ve().asMutable();return t.__iterate((function(o,i){n.update(e.call(r,o,i,t),0,(function(t){return t+1}))})),n.asImmutable()}(this,t,e)},equals:function(t){return qr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new dt(t._cache);var e=t.toSeq().map(un).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(an(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,o,i){if(t.call(e,r,o,i))return n=[o,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(C,null,t)},flatMap:function(t,e){return ie(this,function(t,e,r){var n=ae(t);return t.toSeq().map((function(o,i){return n(e.call(r,o,i,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return ie(this,te(this,t,!0))},fromEntrySeq:function(){return new Kt(this)},get:function(t,e){return this.find((function(e,r){return Ot(r,t)}),void 0,e)},getIn:Qr,groupBy:function(t,e){return function(t,e,r){var n=W(t),o=(tt(t)?Or():Ve()).asMutable();t.__iterate((function(i,u){o.update(e.call(r,i,u,t),(function(t){return(t=t||[]).push(n?[u,i]:i),t}))}));var i=ae(t);return o.map((function(e){return ie(t,i(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,T)!==T},hasIn:function(t){return Xr(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:K(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:K(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return Ot(e,t)}))},keySeq:function(){return this.toSeq().map(on).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return re(this,t)},maxBy:function(t,e){return re(this,e,t)},min:function(t){return re(this,t?sn(t):fn)},minBy:function(t,e){return re(this,e?sn(e):fn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return ie(this,Xt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(an(t),e)},sortBy:function(t,e){return ie(this,ee(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return ie(this,function(t,e,r){var n=se(t);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var u=0;return t.__iterate((function(t,o,a){return e.call(r,t,o,a)&&++u&&n(t,o,i)})),u},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var u=t.__iterator(2,o),a=!0;return new nt((function(){if(!a)return{value:void 0,done:!0};var t=u.next();if(t.done)return t;var o=t.value,s=o[0],c=o[1];return e.call(r,c,s,i)?2===n?t:ot(n,s,c,t):(a=!1,{value:void 0,done:!0})}))},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(an(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=tt(t),r=W(t),n=e?1:0;return function(t,e){return e=It(e,3432918353),e=It(e<<15|e>>>-15,461845907),e=It(e<<13|e>>>-13,5),e=It((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=jt((e=It(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+pn(Tt(t),Tt(e))|0}:function(t,e){n=n+pn(Tt(t),Tt(e))|0}:e?function(t){n=31*n+Tt(t)|0}:function(t){n=n+Tt(t)|0}),n)}(this))}});var tn=K.prototype;tn["@@__IMMUTABLE_ITERABLE__@@"]=!0,tn[rt]=tn.values,tn.toJSON=tn.toArray,tn.__toStringMapper=me,tn.inspect=tn.toSource=function(){return this.toString()},tn.chain=tn.flatMap,tn.contains=tn.includes,Rr(G,{flip:function(){return ie(this,Gt(this))},mapEntries:function(t,e){var r=this,n=0;return ie(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return ie(this,this.toSeq().flip().map((function(n,o){return t.call(e,n,o,r)})).flip())}});var en=G.prototype;en["@@__IMMUTABLE_KEYED__@@"]=!0,en[rt]=tn.entries,en.toJSON=Zr,en.__toStringMapper=function(t,e){return me(e)+": "+me(t)},Rr($,{toKeyedSeq:function(){return new Wt(this,!1)},filter:function(t,e){return ie(this,Jt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return ie(this,Yt(this,!1))},slice:function(t,e){return ie(this,Qt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=L(t,t<0?this.count():this.size);var n=this.slice(0,t);return ie(this,1===r?n:n.concat(pe(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return ie(this,te(this,t,!1))},get:function(t,e){return(t=B(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=B(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ie(this,function(t,e){var r=se(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return t.__iterate((function(t){return(!i||!1!==r(e,i++,o))&&!1!==r(t,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=t.__iterator(1,n),u=0;return new nt((function(){return(!o||u%2)&&(o=i.next()).done?o:u%2?ot(r,u++,e):ot(r,u++,o.value,o)}))},r}(this,t))},interleave:function(){var t=[this].concat(pe(arguments)),e=oe(this.toSeq(),yt.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),ie(this,r)},keySeq:function(){return Yr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return ie(this,Xt(this,t,e,!1))},zip:function(){var t=[this].concat(pe(arguments));return ie(this,oe(this,cn,t))},zipAll:function(){var t=[this].concat(pe(arguments));return ie(this,oe(this,cn,t,!0))},zipWith:function(t){var e=pe(arguments);return e[0]=this,ie(this,oe(this,t,e))}});var rn=$.prototype;function nn(t,e,r,n,o,i){return le(t.size),t.__iterate((function(t,i,u){o?(o=!1,r=t):r=e.call(n,r,t,i,u)}),i),r}function on(t,e){return e}function un(t,e){return[e,t]}function an(t){return function(){return!t.apply(this,arguments)}}function sn(t){return function(){return-t.apply(this,arguments)}}function cn(){return pe(arguments)}function fn(t,e){return t<e?1:t>e?-1:0}function pn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}rn["@@__IMMUTABLE_INDEXED__@@"]=!0,rn[Z]=!0,Rr(Y,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),Y.prototype.has=tn.includes,Y.prototype.contains=Y.prototype.includes,Rr(lt,G.prototype),Rr(yt,$.prototype),Rr(vt,Y.prototype);var hn=function(t){function e(t){return null==t?dn():Lr(t)?t:dn().withMutations((function(e){var r=Y(t);le(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(G(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Fr);hn.isOrderedSet=Lr;var ln,yn=hn.prototype;function vn(t,e){var r=Object.create(yn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function dn(){return ln||(ln=vn(jr()))}yn[Z]=!0,yn.zip=rn.zip,yn.zipWith=rn.zipWith,yn.__empty=dn,yn.__make=vn;var mn=function(t,e){var r,n=function(i){var u=this;if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(t),s=o._indices={};o._name=e,o._keys=a,o._defaultValues=t;for(var c=0;c<a.length;c++){var f=a[c];s[f]=c,o[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+_n(this)+' with property "'+f+'" since that property name is part of the Record API.'):Sn(o,f)}}this.__ownerID=void 0,this._values=lr().withMutations((function(t){t.setSize(u._keys.length),G(i).forEach((function(e,r){t.set(u._indices[r],e===u._defaultValues[r]?void 0:e)}))}))},o=n.prototype=Object.create(bn);return o.constructor=n,e&&(n.displayName=e),n};mn.prototype.toString=function(){for(var t,e=_n(this)+" { ",r=this._keys,n=0,o=r.length;n!==o;n++)e+=(n?", ":"")+(t=r[n])+": "+me(this.get(t));return e+" }"},mn.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&wn(this).equals(wn(t))},mn.prototype.hashCode=function(){return wn(this).hashCode()},mn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},mn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},mn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return gn(this,r)}return this},mn.prototype.remove=function(t){return this.set(t)},mn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:gn(this,t)},mn.prototype.wasAltered=function(){return this._values.wasAltered()},mn.prototype.toSeq=function(){return wn(this)},mn.prototype.toJS=function(){return Ur(this)},mn.prototype.entries=function(){return this.__iterator(2)},mn.prototype.__iterator=function(t,e){return wn(this).__iterator(t,e)},mn.prototype.__iterate=function(t,e){return wn(this).__iterate(t,e)},mn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?gn(this,e,t):(this.__ownerID=t,this._values=e,this)},mn.isRecord=Q,mn.getDescriptiveName=_n;var bn=mn.prototype;function gn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function _n(t){return t.constructor.displayName||t.constructor.name||"Record"}function wn(t){return wt(t._keys.map((function(e){return[e,t.get(e)]})))}function Sn(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){he(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}bn["@@__IMMUTABLE_RECORD__@@"]=!0,bn.delete=bn.remove,bn.deleteIn=bn.removeIn=Oe,bn.getIn=Qr,bn.hasIn=tn.hasIn,bn.merge=Te,bn.mergeWith=Me,bn.mergeIn=Le,bn.mergeDeep=Ce,bn.mergeDeepWith=Ne,bn.mergeDeepIn=qe,bn.setIn=Ae,bn.update=je,bn.updateIn=De,bn.withMutations=Re,bn.asMutable=Ue,bn.asImmutable=Fe,bn[rt]=bn.entries,bn.toJSON=bn.toObject=tn.toObject,bn.inspect=bn.toSource=function(){return this.toString()};var En=function(){function t(t){this._list=lr([]).concat(t||[])}return Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),t.prototype.addOrUpdate=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=new t(this.list),o=0,i=e;o<i.length;o++){var u=i[o],a=this.convert(u)[0],s=n.getIndexForKey(a);n=-1!==s?new t(n.list.set(s,u)):n.add(u)}return n},t.prototype.addOrUpdateSearchTerm=function(e){var r=this.list;return e?this.addOrUpdate({query:e}):new t(r)},t.prototype.add=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.list.concat(e);return new t(n)},t.prototype.convert=function(t){var e=Object.keys(t)[0];return[e,t[e]]},t.prototype.getOne=function(t){return this.list.find((function(e){return Object.keys(e)[0]===t}))||null},t.prototype.getMany=function(t){var e=this;return this.list.filter((function(r){var n=e.convert(r)[0];return t===n}))},t.prototype.deleteAll=function(e){return new t(this.list.filter((function(t){return Object.keys(t)[0]!==e})))},t.prototype.delete=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=new t(this.list);return e.forEach((function(e){var r=n.getIndexForParameter(e);n=new t(n.list.delete(r))})),n},t.prototype.toString=function(){var t=this,e=new URLSearchParams;return this.list.forEach((function(r){var n=t.convert(r)[0];e.append(n,r[n])})),e.toString()},t.prototype.toArray=function(){return this.list.toArray()},t.prototype.updateFirst=function(e){var r=this.list,n=this.convert(e)[0],o=this.getIndexForKey(n);return new t(-1!==o?r.set(o,e):r)},t.prototype.update=function(e,r){var n=this.list,o=this.getIndexForParameter(e);return new t(n.set(o,r))},t.prototype.getIndexForKey=function(t){return this.list.findIndex((function(e){return Object.keys(e)[0]===t}))},t.prototype.getIndexForParameter=function(t){var e=this;return this.list.findIndex((function(r){var n=e.convert(r),o=n[0],i=n[1],u=e.convert(t),a=u[0],s=u[1];return o===a&&i===s}))},t}(),Pn=function(){return(Pn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},An=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,a)}s((n=n.apply(t,e||[])).next())}))},xn=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},On="Invalid pagination parameters defined. Static pagination parameters are required.",In=function(){function t(t,e){var r=this;this.responseData=e,this._fetchClient=t,this.responseData=e,this.searchResults=e.results.map((function(t){var e=r.responseData.highlighting;return new O(t,e)})),this.paginationParams=this.extractPaginationParams(this.responseData),this.facets=this.hasFacets(e)?this.extractFacets(e,t):[]}return Object.defineProperty(t.prototype,"numberOfResults",{get:function(){return this.responseData.numRows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"didYouMean",{get:function(){return this.responseData.didYouMean},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fetchClient",{get:function(){return this._fetchClient},enumerable:!0,configurable:!0}),t.prototype.hasFacets=function(t){return t.facets.length>0&&t.facetConfigs.length>0},t.prototype.extractFacets=function(t,e){return t.facets.map((function(r,n){var o=t.facetConfigs[n].baseName,i=Object.keys(t.requestParameters).find((function(t){return t.includes(o)})),u=new D(e,r,t.facetConfigs[n]);if(i){var a=t.requestParameters[i].map((function(t){return t.replace(/"/g,"")}));return u.setSelectedValues.apply(u,a)}return u}))},t.prototype.extractPaginationParams=function(t){var e=t.requestParameters;return this.hasDynamicPaginationParams(e)?this.extractDynamicPaginationParams(e):this.hasStaticPaginationParams(e)?this.extractStaticPaginationParams(e):this.setDefaultStaticPaginationParams(t.rows)},t.prototype.hasDynamicPaginationParams=function(t){var e=Object.prototype.hasOwnProperty.call(t,"haupia_rows"),r=Object.prototype.hasOwnProperty.call(t,"haupia_start");return e&&r},t.prototype.extractDynamicPaginationParams=function(t){var e=Number(t.haupia_rows),r=Number(t.haupia_start);if(isNaN(e)||isNaN(r))throw Error("Invalid pagination parameters.");return{rows:e,start:r}},t.prototype.hasStaticPaginationParams=function(t){var e=Object.prototype.hasOwnProperty.call(t,"haupia_pageNumber"),r=Object.prototype.hasOwnProperty.call(t,"haupia_pageSize");return e&&r},t.prototype.extractStaticPaginationParams=function(t){var e=Number(t.haupia_pageNumber),r=Number(t.haupia_pageSize);if(isNaN(e)||isNaN(r))throw Error("Invalid pagination parameters.");return{pageNumber:e,pageSize:r}},t.prototype.setDefaultStaticPaginationParams=function(t){return{pageNumber:0,pageSize:t}},t.prototype.getNumberOfPages=function(){if(!this.isStaticPagination(this.paginationParams))throw Error(On);return Math.ceil(this.responseData.numRows/this.paginationParams.pageSize)},t.prototype.getFacet=function(t){return this.facets.find((function(e){return e.name===t}))||null},t.prototype.resetFacets=function(t){return An(this,void 0,void 0,(function(){return xn(this,(function(e){return this.facets=this.facets.map((function(e){var r;return t?(null===(r=t)||void 0===r?void 0:r.includes(e.name))?e.reset():e:e.reset()})),this.isDynamicPagination(this.paginationParams)?[2,this.search({start:0,rows:this.paginationParams.rows})]:[2,this.getFirstPage()]}))}))},t.prototype.getFirstPage=function(){if(!this.isStaticPagination(this.paginationParams))throw Error(On);return this.getPage(0)},t.prototype.getLastPage=function(){var t=this.getNumberOfPages()-1;return this.getPage(t)},t.prototype.getPage=function(t){return An(this,void 0,void 0,(function(){var e;return xn(this,(function(r){if(!this.isStaticPagination(this.paginationParams))throw Error(On);if((e=this.paginationParams).pageNumber=t,!this.hasPage(t))throw Error("There is no page number: "+t);return[2,this.search(e)]}))}))},t.prototype.hasPage=function(t){var e=this.paginationParams;return Math.ceil(this.responseData.numRows/e.pageSize)>t&&t>=0},t.prototype.hasNext=function(){return!!(this.isDynamicPagination(this.paginationParams)&&this.paginationParams.start+this.paginationParams.rows<this.responseData.numRows)||!!(this.isStaticPagination(this.paginationParams)&&this.paginationParams.pageSize*(this.paginationParams.pageNumber+1)<this.responseData.numRows)},t.prototype.hasPrev=function(){return!!(this.isStaticPagination(this.paginationParams)&&this.paginationParams.pageNumber>0)||!!(this.isDynamicPagination(this.paginationParams)&&this.paginationParams.start>=this.paginationParams.rows)},t.prototype.next=function(){return An(this,void 0,void 0,(function(){var t;return xn(this,(function(e){if(!this.hasNext())throw Error("There is no next page.");return t={},this.isDynamicPagination(this.paginationParams)&&((t=Pn({},this.paginationParams)).start+=this.paginationParams.rows),this.isStaticPagination(this.paginationParams)&&(t=this.paginationParams).pageNumber++,[2,this.search(t)]}))}))},t.prototype.prev=function(){return An(this,void 0,void 0,(function(){var t;return xn(this,(function(e){if(!this.hasPrev())throw Error("There is no previous page.");return t={},this.isStaticPagination(this.paginationParams)&&(t=this.paginationParams).pageNumber--,this.isDynamicPagination(this.paginationParams)&&((t=this.paginationParams).start-=t.rows),[2,this.search(t)]}))}))},t.prototype.addOrUpdateFacetParams=function(t){var e=new En(t.list);return this.facets.forEach((function(t){var r,n=t.getSelectedParameters();e=(r=e.deleteAll(t.getFilterParamName())).add.apply(r,n)})),e},t.prototype.search=function(e){return An(this,void 0,void 0,(function(){var r,n,o,i,u;return xn(this,(function(a){switch(a.label){case 0:r=this.buildFetchParams(e),n=(u=this.fetchClient.parameterList).addOrUpdate.apply(u,r),this.fetchClient.parameterList=this.addOrUpdateFacetParams(n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fetchClient.fetch()];case 2:return o=a.sent(),[2,new t(this.fetchClient,o)];case 3:throw i=a.sent(),new Error(i);case 4:return[2]}}))}))},t.prototype.buildFetchParams=function(t){var e=[],r=this.transformPaginationParamsToFetchParams(t);return e=e.concat(r)},t.prototype.transformPaginationParamsToFetchParams=function(t){var e=[];return this.isDynamicPagination(t)&&(e=this.buildDynamicPaginationParams(t)),this.isStaticPagination(t)&&(e=this.buildStaticPaginationParams(t)),e},t.prototype.buildDynamicPaginationParams=function(t){var e=[];return e.push({haupia_rows:t.rows.toString()}),e.push({haupia_start:t.start.toString()}),e},t.prototype.buildStaticPaginationParams=function(t){var e=[];return e.push({haupia_pageNumber:t.pageNumber.toString()}),e.push({haupia_pageSize:t.pageSize.toString()}),e},t.prototype.isDynamicPagination=function(t){return void 0!==t.rows},t.prototype.isStaticPagination=function(t){return void 0!==t.pageNumber},t}(),jn=r(3),Dn=function(t){return t},Tn=function(t,e){return'<a href="'+t.link+'"><h1>'+t.title+"</h1><p>"+e.content+"</p></a>"},Mn=function(t){return"<span>"+t+"</span>"},kn=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,a)}s((n=n.apply(t,e||[])).next())}))},zn=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Bn=["Enter","ArrowUp","ArrowDown"],Cn=new CustomEvent("smart-search-widget-appeared",{bubbles:!0,cancelable:!0}),Nn=new CustomEvent("smart-search-widget-hidden",{bubbles:!0,cancelable:!0}),Ln=new CustomEvent("smart-search-input-empty",{bubbles:!0,cancelable:!0}),qn=function(){function t(t,e){this.autocompleteClient=t,this.options=e}return t.prototype.getAutocompleteList=function(t,e){var r,n;return kn(this,void 0,void 0,(function(){var o,i,u,a,s=this;return zn(this,(function(c){switch(c.label){case 0:e||(e=this.options),c.label=1;case 1:return c.trys.push([1,3,,4]),o=[{prefix:t.toLowerCase()}],(null===(r=e)||void 0===r?void 0:r.language)&&o.push({language:e.language}),this.autocompleteClient.parameterList=(a=this.autocompleteClient.parameterList).addOrUpdate.apply(a,o),[4,this.autocompleteClient.fetch()];case 2:return i=c.sent(),(null===(n=e)||void 0===n?void 0:n.highlight)?[2,i.map((function(e){return s.highlightPrefix(e,t)}))]:[2,i];case 3:return u=c.sent(),console.error("Error fetching autocomplete suggestions",u),[3,4];case 4:return[2,[""]]}}))}))},t.prototype.highlightPrefix=function(t,e){return"<strong>"+e+"</strong>"+t.substr(t.indexOf(e)+e.length)},t.prototype.showBox=function(t){"hidden"===t.style.visibility&&(t.style.visibility="visible",t.dispatchEvent(Cn))},t.prototype.hideBox=function(t){t.style.visibility="hidden",t.dispatchEvent(Nn)},t.prototype.clearAutocompleteBox=function(t){this.hideBox(t),t.querySelectorAll(".smart-search-autocomplete-item").forEach((function(t){return t.remove()}))},t.prototype.createAutocompleteBox=function(t){var e=document.createElement("div");return e.setAttribute("id",t+" autocomplete-widget"),e.setAttribute("class","smart-search-autocomplete-widget"),e},t.prototype.removeHighlights=function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||""},t.prototype.markActiveItem=function(t,e){var r=Array.from(t.querySelectorAll(".smart-search-autocomplete-item")),n=r.filter((function(t,r){return r===e})).map((function(t){return t.classList.add("smart-search-autocomplete-active"),t})).pop();return r.filter((function(t,r){return r!==e})).forEach((function(t){return t.classList.remove("smart-search-autocomplete-active")})),n},t.prototype.renderItem=function(t){var e=document.createElement("div");return e.setAttribute("class","smart-search-autocomplete-item"),e.innerHTML=t,e},t.prototype.initializeAndAttach=function(t,e){var r=this,n=this.createAutocompleteBox(t.id);if(e)e.appendChild(n);else{if(!t.parentNode)throw new Error("Given input element has no parent. Please attach it to an element in the DOM tree.");t.parentNode.appendChild(n)}this.hideBox(n),jn.fromEvent(t,"keydown").debounce(300).filter((function(t){return!Bn.includes(t.key)})).map((function(t){return t.target.value})).skipDuplicates().flatMapLatest((function(e){var o;t.addEventListener("smart-search-input-empty",(function(){return r.clearAutocompleteBox(n)}),{once:!0});var i=(null===(o=r.options)||void 0===o?void 0:o.prefixThreshold)||0;if(0===e.length)dispatchEvent(Ln);else if(e.length>i)return jn.fromPromise(r.getAutocompleteList(e));return[]})).onValue((function(e){r.clearAutocompleteBox(n),e.forEach((function(e){r.showBox(n);var o=r.renderItem(e);o.addEventListener("click",(function(){t.value=r.removeHighlights(e),t.focus(),r.clearAutocompleteBox(n)})),n.appendChild(o)}))}));var o=jn.fromEvent(t,"keydown").filter((function(t){return"ArrowUp"===t.key})),i=jn.fromEvent(t,"keydown").filter((function(t){return"ArrowDown"===t.key})),u=jn.fromEvent(t,"keydown").filter((function(t){return"Enter"===t.key})),a=jn.fromEvent(n,"smart-search-widget-appeared");jn.update(-1,[i,function(t){return Math.min(t+1,4)}],[o,function(t){return Math.max(t-1,-1)}],[a,function(){return-1}],[u,function(){return-1}]).onValue((function(e){var o=r.markActiveItem(n,e);t.addEventListener("keydown",(function(t){var e;"Enter"===t.key&&(null===(e=o)||void 0===e||e.click())}))}))},t}(),Rn=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,a)}s((n=n.apply(t,e||[])).next())}))},Un=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Fn={cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"},Wn=function(){function t(t,e){var r,n;this.url=t,this._parameterList=new En,this._autocomplete=(null===(n=e)||void 0===n?void 0:n.autocomplete)||!1,e&&(this.parameterList=(r=this.parameterList.addOrUpdateSearchTerm(e.searchTerm||"")).add.apply(r,e.customParams||[]))}return Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this._autocomplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameterList",{get:function(){return this._parameterList},set:function(t){this._parameterList=t},enumerable:!0,configurable:!0}),t.prototype.getUrlWithPath=function(t){var e=t;return e.endsWith("/")||(e+="/"),this.autocomplete?e+"autocomplete":e+"execute"},t.prototype.buildRequest=function(t){if(t!==this.url)return new Request(t,Fn);var e=this.getUrlWithPath(t),r=this.parameterList.toString(),n=new URL(e+"/?"+r).toString();return new Request(n,Fn)},t.prototype.handleStatus=function(t){if(!t.ok)throw new Error(t.statusText);return t},t.prototype.fetch=function(t){return void 0===t&&(t=this.url),Rn(this,void 0,void 0,(function(){var e,r,n;return Un(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e=this.buildRequest(t),[4,fetch(e)];case 1:return r=o.sent(),[4,this.handleStatus(r).json()];case 2:return[2,o.sent()];case 3:throw n=o.sent(),new Error(n);case 4:return[2]}}))}))},t}(),Vn=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.renderDidYouMean=Mn}return t.prototype.initDefaultClasses=function(){return{wrapper:["smart-search-did-you-mean-wrapper"],element:["smart-search-did-you-mean-element"]}},t}(),Hn=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.renderNext=Dn,this.renderPage=Dn,this.renderPrev=Dn}return t.prototype.initDefaultClasses=function(){return{pagination:["smart-search-pagination"],nextButton:["smart-search-pagination-next"],prevButton:["smart-search-pagination-prev"],pageButton:["smart-search-pagination-page"],currentPage:["smart-search-pagination-current"]}},t}(),Kn=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.templateFunction=Tn}return t.prototype.initDefaultClasses=function(){return{wrapper:["smart-search-search-results"],element:["smart-search-search-result"]}},t}(),Gn=function(){function t(t){this.page=t,this._didYouMeanTemplate=new Vn,this._paginationTemplate=new Hn,this._searchResultTemplate=new Kn}return Object.defineProperty(t.prototype,"didYouMeanTemplate",{get:function(){return this._didYouMeanTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginationTemplate",{get:function(){return this._paginationTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"searchResultTemplate",{get:function(){return this._searchResultTemplate},enumerable:!0,configurable:!0}),t.prototype.renderNextButton=function(t){if(void 0===t&&(t="Next"),!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");if(this.page.hasNext()){var e=this.page.paginationParams.pageNumber+1;return this.renderPaginationElement(this._paginationTemplate.cssClasses.nextButton,e,this._paginationTemplate.renderNext,t)}},t.prototype.renderNextButtonToHTMLElement=function(t,e){void 0===e&&(e="Next");var r=this.renderNextButton(e);r&&t.append(r)},t.prototype.renderPrevButton=function(t){if(void 0===t&&(t="Prev"),!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");if(this.page.hasPrev()){var e=this.page.paginationParams.pageNumber-1;return this.renderPaginationElement(this._paginationTemplate.cssClasses.prevButton,e,this._paginationTemplate.renderPrev,t)}},t.prototype.renderPrevButtonToHTMLElement=function(t,e){void 0===e&&(e="Prev");var r=this.renderPrevButton(e);r&&t.append(r)},t.prototype.renderPageButtons=function(t){if(!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");for(var e=this.page.paginationParams,r=Math.ceil(this.page.numberOfResults/e.pageSize),n=this.calculateFirstPageNumber(t,r),o=[],i=0;i<t;i++){var u=n+i,a=this.renderPaginationElement(this._paginationTemplate.cssClasses.pageButton,u,this._paginationTemplate.renderPage);if(o.push(a),n+i+1===r)break}var s=e.pageNumber;return this.highlightCurrentPage(o,s),o},t.prototype.calculateFirstPageNumber=function(t,e){var r=this.page.paginationParams.pageNumber,n=r-Math.floor(t/2);return Math.ceil(t/2)>e-r&&(n-=Math.ceil(t/2)-(e-r)),Math.max(0,n)},t.prototype.highlightCurrentPage=function(t,e){var r=this;t.filter((function(t){return t.getAttribute("smart-search-page-value")===e.toString()})).forEach((function(t){var e;return(e=t.classList).add.apply(e,r._paginationTemplate.cssClasses.currentPage)}))},t.prototype.renderPageButtonsToHTMLElement=function(t,e){t.append.apply(t,this.renderPageButtons(e))},t.prototype.renderPagination=function(t){var e,r=document.createElement("ul");return this.renderPrevButtonToHTMLElement(r),this.renderPageButtonsToHTMLElement(r,t),this.renderNextButtonToHTMLElement(r),(e=r.classList).add.apply(e,this._paginationTemplate.cssClasses.pagination),r},t.prototype.renderPaginationToHTMLElement=function(t,e){t.append(this.renderPagination(e))},t.prototype.renderPaginationElement=function(t,e,r,n){var o,i=document.createElement("li");return(o=i.classList).add.apply(o,t),i.setAttribute("smart-search-page-value",e.toString()),i.innerHTML=r(n||(e+1).toString()),i},t.prototype.renderSearchResults=function(){var t,e=this,r=this.page.searchResults.map((function(t){var r,n=document.createElement("div");return n.innerHTML=t.render(e._searchResultTemplate.templateFunction),(r=n.classList).add.apply(r,e._searchResultTemplate.cssClasses.element),n})),n=document.createElement("div");return(t=n.classList).add.apply(t,this._searchResultTemplate.cssClasses.wrapper),n.append.apply(n,r),n},t.prototype.renderSearchResultsToHTMLElement=function(t){t.appendChild(this.renderSearchResults())},t.prototype.renderDidYouMean=function(){var t,e=this;if(0===this.page.didYouMean.length)throw Error("There are no search query suggestions.");var r=this.page.didYouMean.map((function(t){return e._didYouMeanTemplate.renderDidYouMean(t)})),n=document.createElement("div");return(t=n.classList).add.apply(t,this._didYouMeanTemplate.cssClasses.wrapper),n.insertAdjacentHTML("afterbegin",r.join("")),Array.from(n.children).forEach((function(t){var r;return(r=t.classList).add.apply(r,e._didYouMeanTemplate.cssClasses.element)})),n},t.prototype.renderDidYouMeanToHTMLElement=function(t){t.appendChild(this.renderDidYouMean())},t}(),$n=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function u(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,a)}s((n=n.apply(t,e||[])).next())}))},Yn=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Jn=function(){function t(t,e,r){var n,o,i;this.host=t,this.preparedSearch=e,this.options=r,this.apiEndpoint=(null===(n=r)||void 0===n?void 0:n.apiEndpoint)||"/v1/prepared_search";var u=""+this.host+this.apiEndpoint+"/"+this.preparedSearch+"/",a={};if(null===(o=r)||void 0===o?void 0:o.customParams){if(!Array.isArray(r.customParams))throw new Error("The customParams property must be an Array");a.customParams=r.customParams}this._searchClient=new Wn(u,a);var s=null===(i=r)||void 0===i?void 0:i.autocompleteOptions,c=a;c.autocomplete=!0;var f=new Wn(u,c);this._autocompleteWidget=new qn(f,s)}return Object.defineProperty(t.prototype,"searchClient",{get:function(){return this._searchClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autocompleteWidget",{get:function(){return this._autocompleteWidget},enumerable:!0,configurable:!0}),t.version=function(){return"1.1.1-SNAPSHOT-HPJS-53.1"},t.prototype.search=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return $n(this,void 0,void 0,(function(){var r,n,o,i;return Yn(this,(function(u){switch(u.label){case 0:r=(i=this.searchClient.parameterList.addOrUpdateSearchTerm(t)).add.apply(i,e),this.searchClient.parameterList=r,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.searchClient.fetch()];case 2:return n=u.sent(),this.searchClient.parameterList=r.delete.apply(r,e),[2,new In(this.searchClient,n)];case 3:throw o=u.sent(),this.searchClient.parameterList=r.delete.apply(r,e),new Error(o);case 4:return[2]}}))}))},t.prototype.mapPages=function(t,e,r){var n=t.groups.find((function(t){return t.name===e}));if(void 0===n)throw Error("Searched group not found!");var o=new Map,i=this.searchClient.parameterList.addOrUpdateSearchTerm(r);this.searchClient.parameterList=i;for(var u=0,a=n.groups;u<a.length;u++){var s=a[u],c=JSON.parse(JSON.stringify(t));c.results=s.results,c.numRows=s.numRows;var f=new In(this.searchClient,c);o.set(s.value,f)}return o},t.prototype.searchWithGroup=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return $n(this,void 0,void 0,(function(){var o,i,u,a,s,c;return Yn(this,(function(f){switch(f.label){case 0:o=[{query:t},{grouping:"on"},{groupField:e},{groupLimit:r.toString()}],i=(s=(c=this.searchClient.parameterList).addOrUpdate.apply(c,o)).add.apply(s,n),this.searchClient.parameterList=i,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.searchClient.fetch()];case 2:return u=f.sent(),this.searchClient.parameterList=i.delete.apply(i,n),[2,this.mapPages(u,e,t)];case 3:throw a=f.sent(),this.searchClient.parameterList=i.delete.apply(i,n),new Error(a);case 4:return[2]}}))}))},t.prototype.fetchAutocompleteList=function(t,e){return this.autocompleteWidget.getAutocompleteList(t,e)},t.prototype.attachAutocompleteWidget=function(t,e){this.autocompleteWidget.initializeAndAttach(t,e)},t.prototype.getPageRenderer=function(t){return new Gn(t)},t}();r.d(e,"SmartSearch",(function(){return Jn})),r.d(e,"Page",(function(){return In})),r.d(e,"Facet",(function(){return D})),r.d(e,"SearchResult",(function(){return O})),r.d(e,"PageRenderer",(function(){return Gn}))}])}));